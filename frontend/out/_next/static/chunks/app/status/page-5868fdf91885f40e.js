(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5357],{29652:function(e,t,s){Promise.resolve().then(s.bind(s,71814))},71814:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var n=s(37821),r=s(58078),a=s(64790),i=s(84089),l=s(41634),c=s(87769),o=s(42347),d=s(67469),u=s(92302),m=s(82531),x=s(22828);let h=(0,s(38322).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var f=s(79578),p=s(40496),v=s(14275),j=s(48908),y=s(57751),g=s(21042),N=s(95039);let w=()=>(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:(0,n.jsx)(u.O,{className:"h-6 w-1/3"})})}),(0,n.jsx)(c.aY,{className:"space-y-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(u.O,{className:"h-4 w-1/4"}),(0,n.jsx)(u.O,{className:"h-6 w-16"})]},t))})]}),(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:(0,n.jsx)(u.O,{className:"h-6 w-1/3"})})}),(0,n.jsx)(c.aY,{className:"space-y-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(u.O,{className:"h-4 w-1/3"}),(0,n.jsx)(u.O,{className:"h-4 w-1/2"})]},t))})]})]}),b=e=>{switch(e){case"healthy":case"operational":return(0,n.jsx)(m.Z,{className:"w-5 h-5 text-green-500"});case"degraded":return(0,n.jsx)(x.Z,{className:"w-5 h-5 text-yellow-500"});case"error":case"major_outage":return(0,n.jsx)(x.Z,{className:"w-5 h-5 text-red-500"});default:return(0,n.jsx)(h,{className:"w-5 h-5 text-gray-500"})}},k=e=>{switch(e){case"healthy":case"operational":return"default";case"degraded":return"secondary";case"error":case"major_outage":return"destructive";default:return"outline"}},S=e=>({costIngestor:"Ingest\xe3o de Custos",correlateHealth:"Correla\xe7\xe3o de Health Events",automationSfn:"Automa\xe7\xf5es (Step Functions)",marketplaceMetering:"Medi\xe7\xe3o do Marketplace"})[e]||e;function C(){let[e,t]=(0,r.useState)(null),[s,u]=(0,r.useState)({timestamp:new Date().toISOString(),overallStatus:"degraded",services:{costIngestor:{status:"unknown",lastRun:null,message:""},correlateHealth:{status:"unknown",lastRun:null,message:""},automationSfn:{status:"unknown",lastRun:null,message:""},marketplaceMetering:{status:"unknown",lastRun:null,message:""}}}),[m,h]=(0,r.useState)(!0),[C,O]=(0,r.useState)(null),[Z,E]=(0,r.useState)(new Date),R=(0,i.d)(),I=(0,r.useCallback)(async()=>{try{h(!0),O(null);let e=await fetch("/api/public/status"),s=e.ok?await e.json():null,n=null;try{n=await a.x1.get("/api/system-status/aws")}catch(e){n={timestamp:new Date().toISOString(),services:{},totalIncidents:0}}t(n);let r=s.services,i=Object.values(r).some(e=>"error"===e.status)?"error":Object.values(r).some(e=>"unknown"===e.status)?"degraded":"healthy";u({services:r,overallStatus:i,timestamp:s.timestamp||new Date().toISOString()}),E(new Date)}catch(t){console.error("Erro ao carregar status:",t);let e=(null==t?void 0:t.message)||"Erro ao carregar dados de status";O(e),R.error(e)}finally{h(!1)}},[R]);return((0,r.useEffect)(()=>{I()},[I]),m)?(0,n.jsxs)(y.y,{children:[(0,n.jsx)(g.m,{title:"Status do Sistema",description:"Monitoramento de servi\xe7os AWS e componentes internos"}),(0,n.jsx)(w,{})]}):C?(0,n.jsx)(y.y,{children:(0,n.jsx)(N.u,{icon:x.Z,title:"Erro ao Carregar Status",description:C,action:{label:"Tentar Novamente",onClick:I}})}):(0,n.jsxs)(y.y,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(g.m,{title:"Status do Sistema",description:"Monitoramento em tempo real dos servi\xe7os AWS e componentes internos"}),(0,n.jsxs)(d.z,{onClick:I,variant:"outline",size:"sm",children:[(0,n.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Atualizar"]})]}),(0,n.jsxs)("div",{className:"text-sm text-muted-foreground mb-6",children:["\xdaltima atualiza\xe7\xe3o: ",(0,j.p6)(Z,"pt-BR")]}),(0,n.jsxs)("div",{className:"grid gap-8 lg:grid-cols-2",children:[(0,n.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(p.Z,{className:"w-5 h-5"}),"Servi\xe7os AWS"]})}),(0,n.jsx)(c.aY,{children:e?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"Incidentes Ativos"}),(0,n.jsx)(o.C,{variant:e.totalIncidents>0?"destructive":"default",children:e.totalIncidents})]}),Object.entries(e.services).map(e=>{let[t,s]=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[b(s.status),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:t}),s.incidents.length>0&&(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:[s.incidents.length," incidente(s)"]})]})]}),(0,n.jsx)(o.C,{variant:k(s.status),children:"operational"===s.status?"Operacional":"degraded"===s.status?"Degradado":"Indispon\xedvel"})]},t)}),0===Object.keys(e.services).length&&(0,n.jsx)("div",{className:"text-center text-muted-foreground py-4",children:"Todos os servi\xe7os operacionais"})]}):(0,n.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Dados indispon\xedveis"})})]})}),(0,n.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(v.Z,{className:"w-5 h-5"}),"Componentes Internos"]})}),(0,n.jsx)(c.aY,{children:s?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"Status Geral"}),(0,n.jsx)(o.C,{variant:k(s.overallStatus),children:"healthy"===s.overallStatus?"Saud\xe1vel":"degraded"===s.overallStatus?"Degradado":"Com Problemas"})]}),Object.entries(s.services).map(e=>{let[t,s]=e;return(0,n.jsxs)("div",{className:"p-3 rounded-lg border",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[b(s.status),(0,n.jsx)("span",{className:"font-medium",children:S(t)})]}),(0,n.jsx)(o.C,{variant:k(s.status),children:"healthy"===s.status?"OK":"error"===s.status?"Erro":"Desconhecido"})]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:s.message}),s.lastRun&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["\xdaltima execu\xe7\xe3o: ",(0,j.p6)(new Date(s.lastRun),"pt-BR")]})]},t)})]}):(0,n.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Dados indispon\xedveis"})})]})})]}),e&&e.totalIncidents>0&&(0,n.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,n.jsxs)(c.Zb,{className:"mt-8",children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:"Detalhes dos Incidentes AWS"})}),(0,n.jsx)(c.aY,{children:(0,n.jsx)("div",{className:"space-y-4",children:Object.entries(e.services).map(e=>{let[t,s]=e;return s.incidents.map((e,s)=>(0,n.jsxs)("div",{className:"p-4 rounded-lg border border-yellow-200 bg-yellow-50",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-medium",children:[t," - ",e.eventTypeCode]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:e.eventDescription})]}),(0,n.jsx)(o.C,{variant:"secondary",children:e.statusCode})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Regi\xe3o:"})," ",e.region||"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Recursos afetados:"})," ",e.affectedResources]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"In\xedcio:"})," ",(0,j.p6)(new Date(e.startTime),"pt-BR")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"\xdaltima atualiza\xe7\xe3o:"})," ",(0,j.p6)(new Date(e.lastUpdatedTime),"pt-BR")]})]})]},"".concat(t,"-").concat(s)))})})})]})})]})}},27730:function(e,t,s){"use strict";s.d(t,{ToasterProvider:function(){return o},P:function(){return c}});var n=s(37821),r=s(58078),a=s(48908);function i(e){let{variant:t="info",message:s,className:r,...i}=e;return(0,n.jsx)("div",{className:(0,a.cn)("px-4 py-2 rounded shadow-md flex items-center gap-2 text-sm font-medium transition-colors duration-150","success"===t?"bg-accent-green text-white":"error"===t?"bg-accent-red text-white":"bg-primary text-white",r),...i,children:s})}let l=r.createContext(void 0);function c(){let e=r.useContext(l);if(!e)throw Error("useToaster must be used within ToasterProvider");return e}function o(e){let{children:t}=e,[s,a]=r.useState([]);return(0,n.jsxs)(l.Provider,{value:{showToast:e=>{a(t=>[...t,e]),setTimeout(()=>{a(e=>e.slice(1))},3500)}},children:[t,(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2",children:s.map((e,t)=>(0,n.jsx)(i,{...e},t))})]})}},84089:function(e,t,s){"use strict";s.d(t,{d:function(){return r}});var n=s(27730);function r(){let{showToast:e}=(0,n.P)();return{success:t=>e({variant:"success",message:t}),error:t=>e({variant:"error",message:t}),info:t=>e({variant:"info",message:t})}}},38322:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(58078),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,n.forwardRef)((s,i)=>{let{color:l="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:m,...x}=s;return(0,n.createElement)("svg",{ref:i,...r,width:c,height:c,stroke:l,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(a(e)),u].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(m)?m:[m]])});return s.displayName="".concat(e),s}},22828:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(38322).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},82531:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(38322).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},79578:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(38322).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},40496:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(38322).Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},14275:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(38322).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},54227:function(e,t,s){"use strict";s.d(t,{F:function(){return a},e:function(){return i}});var n=s(58078);function r(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let s=!1,n=e.map(e=>{let n=r(e,t);return s||"function"!=typeof n||(s=!0),n});if(s)return()=>{for(let t=0;t<n.length;t++){let s=n[t];"function"==typeof s?s():r(e[t],null)}}}}function i(...e){return n.useCallback(a(...e),e)}},97035:function(e,t,s){"use strict";s.d(t,{Z8:function(){return i},g7:function(){return l},sA:function(){return o}});var n=s(58078),r=s(54227),a=s(37821);function i(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:s,...a}=e;if(n.isValidElement(s)){let e,i;let l=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.props.ref:s.props.ref||s.ref,c=function(e,t){let s={...t};for(let n in t){let r=e[n],a=t[n];/^on[A-Z]/.test(n)?r&&a?s[n]=(...e)=>{let t=a(...e);return r(...e),t}:r&&(s[n]=r):"style"===n?s[n]={...r,...a}:"className"===n&&(s[n]=[r,a].filter(Boolean).join(" "))}return{...e,...s}}(a,s.props);return s.type!==n.Fragment&&(c.ref=t?(0,r.F)(t,l):l),n.cloneElement(s,c)}return n.Children.count(s)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=n.forwardRef((e,s)=>{let{children:r,...i}=e,l=n.Children.toArray(r),c=l.find(d);if(c){let e=c.props.children,r=l.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...i,ref:s,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return(0,a.jsx)(t,{...i,ref:s,children:r})});return s.displayName=`${e}.Slot`,s}var l=i("Slot"),c=Symbol("radix.slottable");function o(e){let t=({children:e})=>(0,a.jsx)(a.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=c,t}function d(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}},898:function(e,t,s){"use strict";s.d(t,{j:function(){return i}});var n=s(52605);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=n.W,i=(e,t)=>s=>{var n;if((null==t?void 0:t.variants)==null)return a(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:i,defaultVariants:l}=t,c=Object.keys(i).map(e=>{let t=null==s?void 0:s[e],n=null==l?void 0:l[e];if(null===t)return null;let a=r(t)||r(n);return i[e][a]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,n]=t;return void 0===n||(e[s]=n),e},{});return a(e,c,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:s,className:n,...r}=t;return Object.entries(r).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...l,...o}[t]):({...l,...o})[t]===s})?[...e,s,n]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},function(e){e.O(0,[4654,1634,6846,4571,7115,2364,1744],function(){return e(e.s=29652)}),_N_E=e.O()}]);