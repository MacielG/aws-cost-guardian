(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{88620:function(e,r,t){Promise.resolve().then(t.t.bind(t,46587,23)),Promise.resolve().then(t.bind(t,35450)),Promise.resolve().then(t.bind(t,63436)),Promise.resolve().then(t.bind(t,68621)),Promise.resolve().then(t.bind(t,45103)),Promise.resolve().then(t.bind(t,37092)),Promise.resolve().then(t.bind(t,27730)),Promise.resolve().then(t.t.bind(t,83570,23)),Promise.resolve().then(t.bind(t,54680))},63436:function(e,r,t){"use strict";t.d(r,{default:function(){return s}});var n=t(27315);let o="us-east-1_1c1vqVeqC",a="5gt250n7bsc96j3ac5qfq5s890";if(!o||!a)throw console.error("âŒ Erro cr\xedtico de configura\xe7\xe3o do Amplify: Uma ou mais vari\xe1veis de ambiente obrigat\xf3rias est\xe3o ausentes."),console.error("Verifique se NEXT_PUBLIC_AMPLIFY_REGION, NEXT_PUBLIC_COGNITO_USER_POOL_ID, e NEXT_PUBLIC_COGNITO_USER_POOL_CLIENT_ID est\xe3o no seu .env.local"),Error("Configura\xe7\xe3o do Amplify incompleta. Verifique as vari\xe1veis de ambiente.");function s(){return null}n.V.configure({Auth:{Cognito:{userPoolId:o,userPoolClientId:a,signUpVerificationMethod:"code",loginWith:{email:!0}}}},{ssr:!0})},68621:function(e,r,t){"use strict";t.d(r,{I18nClientProvider:function(){return c}});var n=t(37821);t(58078);var o=t(65521),a=t(86545),s=t(81326),i=t(32883);a.ZP.use(s.Z).use(i.Z).use(o.Db).init({fallbackLng:"en",supportedLngs:["en","pt-BR"],defaultNS:"common",interpolation:{escapeValue:!1},backend:{loadPath:"/locales/{{lng}}/common.json"},detection:{caches:["localStorage","cookie"],lookupLocalStorage:"i18nextLng",lookupCookie:"i18next"}});var l=a.ZP;function c(e){let{children:r}=e;return(0,n.jsx)(o.a3,{i18n:l,children:r})}},37092:function(e,r,t){"use strict";t.d(r,{F:function(){return i},ThemeProvider:function(){return s}});var n=t(37821),o=t(58078);let a=(0,o.createContext)({theme:"dark",setTheme:()=>null});function s(e){let{children:r,defaultTheme:t="dark",storageKey:s="vscode-ui-theme",...i}=e,[l,c]=(0,o.useState)(()=>t);return(0,o.useEffect)(()=>{let e=localStorage.getItem(s);e&&c(e)},[]),(0,o.useEffect)(()=>{let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(l),localStorage.setItem(s,l)},[l,s]),(0,n.jsx)(a.Provider,{...i,value:{theme:l,setTheme:e=>{localStorage.setItem(s,e),c(e)}},children:r})}let i=()=>{let e=(0,o.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},35450:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return c},a:function(){return d}});var n=t(37821),o=t(58078),a=t(15740),s=t(36846),i=t(83403);let l=(0,o.createContext)(void 0);function c(e){let{children:r}=e,[t,c]=(0,o.useState)(null),[d,u]=(0,o.useState)(null),[m,f]=(0,o.useState)(!0),h=async()=>{var e,r,t,n,o,i,l,d;f(!0);try{let d=await (0,a.t)(),m=await (0,s.y)();if(!(null===(e=m.tokens)||void 0===e?void 0:e.idToken)){console.warn("Sess\xe3o sem token v\xe1lido"),c(null),u(null);return}c({username:d.username,userId:d.userId,email:null===(n=m.tokens)||void 0===n?void 0:null===(t=n.idToken)||void 0===t?void 0:null===(r=t.payload)||void 0===r?void 0:r.email,"cognito:groups":null===(l=m.tokens)||void 0===l?void 0:null===(i=l.idToken)||void 0===i?void 0:null===(o=i.payload)||void 0===o?void 0:o["cognito:groups"]}),u(m)}catch(e){console.warn("Erro ao carregar usu\xe1rio:",(null==e?void 0:e.message)||e),((null==e?void 0:e.name)==="InvalidCharacterError"||(null==e?void 0:null===(d=e.message)||void 0===d?void 0:d.includes("token")))&&(localStorage.clear(),sessionStorage.clear()),c(null),u(null)}finally{f(!1)}};(0,o.useEffect)(()=>{h()},[]);let g=async()=>{try{await (0,i.w)(),c(null),u(null),localStorage.clear(),sessionStorage.clear()}catch(e){console.error("Erro ao fazer logout:",e),localStorage.clear(),sessionStorage.clear(),c(null),u(null)}},x=async()=>{await h()};return(0,n.jsx)(l.Provider,{value:{user:t,session:d,isAuthenticated:!!t,isLoadingAuth:m,signOut:g,refreshUser:x},children:r})}function d(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},45103:function(e,r,t){"use strict";t.d(r,{default:function(){return _}});var n=t(37821),o=t(58078),a=t(35450),s=t(74542),i=t(58504),l=t(37976),c=t(13346),d=t(75095),u=t(22133),m=t(26200),f=t(79775),h=t(14275),g=t(4812),x=t(37444),v=t(48908);let p=[{href:"/dashboard",label:"Dashboard",icon:l.Z},{href:"/recommendations",label:"Recomenda\xe7\xf5es",icon:c.Z},{href:"/sla-claims",label:"Cr\xe9ditos SLA",icon:d.Z},{href:"/billing",label:"Faturamento",icon:u.Z},{href:"/status",label:"Status do Sistema",icon:m.Z},{href:"/settings/connections",label:"Configura\xe7\xf5es",icon:f.Z},{href:"/admin",label:"Admin",icon:h.Z}];function b(e){var r;let{isMobileOpen:t=!1}=e,o=(0,i.usePathname)(),{user:l}=(0,a.a)();if(!l)return null;let c=null===(r=l["cognito:groups"])||void 0===r?void 0:r.includes("Admins");return(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden"}),(0,n.jsxs)("aside",{className:(0,v.cn)("fixed inset-y-0 left-0 z-50 w-64 flex flex-col border-r border-gray-200 bg-white transition-transform duration-300 ease-in-out md:hidden",t?"translate-x-0":"-translate-x-full"),children:[(0,n.jsx)("div",{className:"flex h-16 items-center gap-2 border-b px-6",children:(0,n.jsxs)(s.default,{href:"/dashboard",className:"flex items-center gap-2 text-lg font-semibold text-gray-900",children:[(0,n.jsx)(g.Z,{className:"h-6 w-6 text-blue-600"}),(0,n.jsx)("span",{children:"AWS Cost Guardian"})]})}),(0,n.jsx)("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:(0,n.jsx)("ul",{className:"space-y-1",children:p.map(e=>{if("/admin"===e.href&&!c)return null;let r=null==o?void 0:o.startsWith(e.href),t=e.icon;return(0,n.jsx)("li",{children:(0,n.jsxs)(s.default,{href:e.href,className:(0,v.cn)("group flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 hover:text-gray-900",r&&"bg-gray-100 text-gray-900"),children:[(0,n.jsx)(t,{className:(0,v.cn)("h-5 w-5 shrink-0 text-gray-400 group-hover:text-gray-600",r&&"text-gray-600")}),e.label]})},e.href)})})}),(0,n.jsx)("div",{className:"mt-auto border-t p-4",children:(0,n.jsxs)(s.default,{href:"/support",className:"group flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 hover:text-gray-900",children:[(0,n.jsx)(x.Z,{className:"h-5 w-5 text-gray-400"}),(0,n.jsx)("span",{children:"Suporte"})]})})]})]})}var j=t(33392),y=t(65800),N=t(76556),w=t(67469),k=t(92362),S=t(80778),C=t(37092);function P(){let{theme:e,setTheme:r}=(0,C.F)();return(0,n.jsxs)(w.z,{variant:"ghost",size:"icon",onClick:()=>r("dark"===e?"light":"dark"),className:"h-9 w-9 px-0",children:[(0,n.jsx)(k.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,n.jsx)(S.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,n.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}let E=[{href:"/dashboard",label:"Dashboard",icon:l.Z},{href:"/recommendations",label:"Recomenda\xe7\xf5es",icon:c.Z},{href:"/sla-claims",label:"Cr\xe9ditos SLA",icon:d.Z},{href:"/billing",label:"Faturamento",icon:u.Z},{href:"/status",label:"Status",icon:m.Z},{href:"/settings",label:"Configura\xe7\xf5es",icon:f.Z}];function Z(e){let{onToggleMobileMenu:r}=e,{user:t,signOut:l}=(0,a.a)(),c=(0,i.useRouter)(),[d,u]=(0,o.useState)(!1),m=async()=>{try{await l(),c.push("/login")}catch(e){console.error("Erro ao fazer logout:",e)}},f=((null==t?void 0:t.email)||(null==t?void 0:t.username)||"").toString();return(0,n.jsxs)("header",{className:"fixed inset-x-0 top-0 z-50 flex h-16 items-center justify-between border-b bg-background/95 backdrop-blur-sm px-4 md:px-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(s.default,{href:"/dashboard",className:"flex items-center gap-2 text-lg font-semibold text-foreground",children:[(0,n.jsx)(g.Z,{className:"h-6 w-6 text-primary"}),(0,n.jsx)("span",{className:"hidden md:inline",children:"AWS Cost Guardian"})]}),(0,n.jsx)("nav",{className:"hidden md:flex items-center gap-1",children:E.map(e=>{let r=e.icon;return(0,n.jsxs)(s.default,{href:e.href,className:"group flex items-center gap-2 rounded-md px-2 py-2 text-sm font-medium text-muted-foreground hover:bg-accent hover:text-accent-foreground",children:[(0,n.jsx)(r,{className:"h-5 w-5 text-muted-foreground group-hover:text-accent-foreground"}),(0,n.jsx)("span",{className:"hidden lg:inline",children:e.label})]},e.href)})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(P,{}),(0,n.jsxs)(w.z,{variant:"ghost",className:"md:hidden",onClick:r,children:[(0,n.jsx)(j.Z,{className:"h-6 w-6"}),(0,n.jsx)("span",{className:"sr-only",children:"Abrir menu"})]}),!t&&(0,n.jsx)(s.default,{href:"/login",children:(0,n.jsx)(w.z,{variant:"default",size:"sm",children:"Entrar"})}),t&&(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)(w.z,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>u(!d),children:[(0,n.jsx)(y.Z,{className:"h-6 w-6 text-muted-foreground"}),(0,n.jsx)("span",{className:"hidden text-sm font-medium md:block",children:f||"Carregando..."})]}),d&&(0,n.jsx)("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-popover shadow-lg ring-1 ring-border",children:(0,n.jsxs)("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[(0,n.jsxs)("div",{className:"block border-b border-border px-4 py-2 text-sm",children:[(0,n.jsx)("p",{className:"font-medium text-popover-foreground",children:"Logado como"}),(0,n.jsx)("p",{className:"truncate text-muted-foreground",children:f})]}),(0,n.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),m()},className:"group flex w-full items-center gap-2 px-4 py-2 text-sm text-popover-foreground hover:bg-accent",role:"menuitem",children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground group-hover:text-accent-foreground"}),"Sair (Logout)"]})]})})]})]})]})}function T(e){let{children:r}=e,[t,a]=(0,o.useState)(!1);return(0,n.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-gray-50",children:[(0,n.jsx)(Z,{onToggleMobileMenu:()=>a(e=>!e)}),(0,n.jsx)(b,{isMobileOpen:t}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto pt-16 p-4 md:p-6 lg:p-8",children:(0,n.jsx)("div",{className:"mx-auto max-w-7xl",children:r})})]})}function _(e){let{children:r}=e,{user:t,isLoadingAuth:o}=(0,a.a)();return o?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):t?(0,n.jsx)(T,{children:r}):(0,n.jsx)(n.Fragment,{children:r})}},67469:function(e,r,t){"use strict";t.d(r,{d:function(){return l},z:function(){return c}});var n=t(37821),o=t(58078),a=t(97035),s=t(898),i=t(48908);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,r)=>{let{className:t,variant:o,size:s,asChild:c=!1,isLoading:d,...u}=e,m=c?a.g7:"button",f=u.disabled||!!d;return(0,n.jsx)(m,{className:(0,i.cn)(l({variant:"primary"===o?"default":"danger"===o?"destructive":o,size:s,className:t})),ref:r,disabled:f,...u})});c.displayName="Button"},27730:function(e,r,t){"use strict";t.d(r,{ToasterProvider:function(){return c},P:function(){return l}});var n=t(37821),o=t(58078),a=t(48908);function s(e){let{variant:r="info",message:t,className:o,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)("px-4 py-2 rounded shadow-md flex items-center gap-2 text-sm font-medium transition-colors duration-150","success"===r?"bg-accent-green text-white":"error"===r?"bg-accent-red text-white":"bg-primary text-white",o),...s,children:t})}let i=o.createContext(void 0);function l(){let e=o.useContext(i);if(!e)throw Error("useToaster must be used within ToasterProvider");return e}function c(e){let{children:r}=e,[t,a]=o.useState([]);return(0,n.jsxs)(i.Provider,{value:{showToast:e=>{a(r=>[...r,e]),setTimeout(()=>{a(e=>e.slice(1))},3500)}},children:[r,(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2",children:t.map((e,r)=>(0,n.jsx)(s,{...e},r))})]})}},88954:function(e){"use strict";e.exports={joinUrl:function(e,r){if(!e&&!r)return"";if(!e)return r||"";if(!r)return e.replace(/\/+$|^(\s*)$/g,"");let t=String(e).trim().replace(/\/+$/,""),n=String(r).trim().replace(/^\/+|\/+$/g,"");return"".concat(t,"/").concat(n)}},e.exports.default=e.exports.joinUrl},48908:function(e,r,t){"use strict";t.d(r,{cn:function(){return s},p6:function(){return l},xG:function(){return i}});var n=t(52605),o=t(31638);t(59792);let{joinUrl:a}=t(88954);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.m6)((0,n.W)(r))}function i(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",t="pt-BR"===r?"BRL":"USD";try{return new Intl.NumberFormat(r,{style:"currency",currency:t}).format(e)}catch(r){return console.error("Error formatting currency:",r),"".concat("BRL"===t?"R$":"$").concat(e.toFixed(2))}}function l(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";try{let t=new Date(e);if(isNaN(t.getTime()))return String(e||"");return new Intl.DateTimeFormat(r,{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)}catch(r){return console.error("Error formatting date:",r),String(e)}}},46587:function(){}},function(e){e.O(0,[7741,6687,4654,6846,238,9012,4680,5521,8127,176,7115,2364,1744],function(){return e(e.s=88620)}),_N_E=e.O()}]);