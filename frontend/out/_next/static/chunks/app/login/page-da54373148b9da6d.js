(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{54279:function(e,n,o){Promise.resolve().then(o.bind(o,76396))},76396:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return u}});var t=o(37821),r=o(87073),l=o(58504),a=o(35450),s=o(58078);function u(){let e=(0,l.useRouter)(),n=(0,l.useSearchParams)(),{user:o}=(0,a.a)(),u=n.get("mode");return(0,s.useEffect)(()=>{o&&("trial"===u?e.push("/onboard?mode=trial"):e.push("/dashboard"))},[o,e,u]),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,t.jsx)("div",{className:"w-full max-w-md",children:(0,t.jsx)(r._,{signUpAttributes:["email"],components:{Header:()=>(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"AWS Cost Guardian"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Automate AWS refunds"})]})}})})})}},35450:function(e,n,o){"use strict";o.d(n,{AuthProvider:function(){return i},a:function(){return d}});var t=o(37821),r=o(58078),l=o(15740),a=o(36846),s=o(83403);let u=(0,r.createContext)(void 0);function i(e){let{children:n}=e,[o,i]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[v,f]=(0,r.useState)(!0),m=async()=>{var e,n,o,t,r,s,u,d;f(!0);try{let d=await (0,l.t)(),v=await (0,a.y)();if(!(null===(e=v.tokens)||void 0===e?void 0:e.idToken)){console.warn("Sess\xe3o sem token v\xe1lido"),i(null),c(null);return}i({username:d.username,userId:d.userId,email:null===(t=v.tokens)||void 0===t?void 0:null===(o=t.idToken)||void 0===o?void 0:null===(n=o.payload)||void 0===n?void 0:n.email,"cognito:groups":null===(u=v.tokens)||void 0===u?void 0:null===(s=u.idToken)||void 0===s?void 0:null===(r=s.payload)||void 0===r?void 0:r["cognito:groups"]}),c(v)}catch(e){console.warn("Erro ao carregar usu\xe1rio:",(null==e?void 0:e.message)||e),((null==e?void 0:e.name)==="InvalidCharacterError"||(null==e?void 0:null===(d=e.message)||void 0===d?void 0:d.includes("token")))&&(localStorage.clear(),sessionStorage.clear()),i(null),c(null)}finally{f(!1)}};(0,r.useEffect)(()=>{m()},[]);let h=async()=>{try{await (0,s.w)(),i(null),c(null),localStorage.clear(),sessionStorage.clear()}catch(e){console.error("Erro ao fazer logout:",e),localStorage.clear(),sessionStorage.clear(),i(null),c(null)}},g=async()=>{await m()};return(0,t.jsx)(u.Provider,{value:{user:o,session:d,isAuthenticated:!!o,isLoadingAuth:v,signOut:h,refreshUser:g},children:n})}function d(){let e=(0,r.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[6846,238,8127,7073,7115,2364,1744],function(){return e(e.s=54279)}),_N_E=e.O()}]);