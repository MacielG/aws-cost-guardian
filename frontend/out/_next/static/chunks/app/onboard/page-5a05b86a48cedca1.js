(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7413],{69787:function(e,r,t){Promise.resolve().then(t.bind(t,96198))},96198:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return j}});var a=t(37821),n=t(58078),o=t(67469),s=t(87769),i=t(92302),c=t(84089),d=t(58504),l=t(41634),u=t(74354),m=t(75424),f=t(25898),x=t(76515),g=t(82531),h=t(75095),b=t(28219);let{joinUrl:p}=t(88954),v=[{id:1,title:"Prepare sua conta AWS",description:"Inicie a conex\xe3o para configurar o acesso seguro e de somente leitura \xe0 sua conta AWS.",icon:m.Z},{id:2,title:"An\xe1lise de Recursos",description:"Nossos algoritmos analisam seus recursos em busca de otimiza\xe7\xf5es de custo e seguran\xe7a.",icon:f.Z},{id:3,title:"Receba Recomenda\xe7\xf5es",description:"Visualize um relat\xf3rio detalhado com todas as economias potenciais encontradas.",icon:x.Z}];function j(){let e=(0,c.d)(),[r,t]=(0,n.useState)(""),[m,f]=(0,n.useState)("PENDING_CFN"),[x,j]=(0,n.useState)(!1),[y,N]=(0,n.useState)(!0),[w,k]=(0,n.useState)(1),E=(0,d.useRouter)(),S=(0,d.useSearchParams)().get("mode"),C=()=>{k(e=>Math.min(e+1,v.length+1))},A=(0,n.useCallback)(async e=>{try{let r=await fetch("/api/onboard-init",{signal:e});if(r.ok){let e=await r.json();if(!1===e.termsAccepted){E.push("/terms");return}f(e.status),"COMPLETED"===e.status&&E.push("/dashboard")}}catch(e){if("AbortError"===e.name)return}},[E]),z=(0,n.useCallback)(async r=>{N(!0);let a=S?"?mode=".concat(S):"";try{let n=await fetch("/api/onboard-init".concat(a),{signal:r,headers:{}});if(n.ok){let e=await n.json(),r=e.templateUrl||"http://costguardianstack-cfntemplatebucket4840c65e-gqmdl89vh3hn.s3-website-us-east-1.amazonaws.com/template.yaml";f(e.status);let a=p("https://0s4kvds1a2.execute-api.us-east-1.amazonaws.com/prod/","onboard"),o="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/create/review?templateURL=".concat(r,"&stackName=CostGuardianStack&param_ExternalId=").concat(e.externalId,"&param_PlatformAccountId=").concat(e.platformAccountId,"&param_CallbackUrl=").concat(encodeURIComponent(a));t(o)}else e.error("Erro ao buscar configura\xe7\xe3o de onboarding."),console.error("Erro ao buscar configura\xe7\xe3o de onboarding.")}catch(r){if("AbortError"===r.name)return;e.error("Erro ao buscar configura\xe7\xe3o de onboarding."),console.error("Erro ao buscar configura\xe7\xe3o de onboarding.")}N(!1)},[S,e]);return(0,n.useEffect)(()=>{let e=new AbortController;return z(e.signal),()=>e.abort()},[z]),(0,n.useEffect)(()=>{if(x&&"COMPLETED"!==m){let e=setInterval(A,5e3);return()=>clearInterval(e)}},[x,m,A]),(0,a.jsx)(l.E.div,{className:"min-h-screen bg-background dark:bg-background/95 flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-3",children:"Bem-vindo ao AWS Cost Guardian"}),(0,a.jsx)("p",{className:"text-xl text-muted-foreground",children:"Otimize seus custos na nuvem de forma inteligente e automatizada."})]}),(0,a.jsxs)("div",{className:"relative grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:[v.map((e,r)=>(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*r},className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center w-12 h-12 rounded-full transition-colors duration-300 ".concat(w>=e.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:w>e.id?(0,a.jsx)(g.Z,{className:"w-6 h-6"}):(0,a.jsx)(e.icon,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})]},e.id)),(0,a.jsx)(l.E.div,{className:"absolute top-6 left-0 h-1 bg-muted rounded-full w-full -z-10"}),(0,a.jsx)(l.E.div,{className:"absolute top-6 left-0 h-1 bg-primary rounded-full -z-10",animate:{width:"".concat((w-1)/(v.length-1)*100,"%")}})]}),(0,a.jsx)(u.M,{mode:"wait",children:y?(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(s.Zb,{className:"border-border",children:(0,a.jsx)(s.aY,{className:"p-8",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(i.O,{className:"w-12 h-12 rounded-full mb-4"}),(0,a.jsx)(i.O,{className:"w-48 h-6 mb-2"}),(0,a.jsx)(i.O,{className:"w-64 h-4"})]})})})},"loading"):"COMPLETED"===m?(0,a.jsx)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},children:(0,a.jsx)(s.Zb,{className:"border-green-500/30 bg-green-500/5 dark:bg-green-500/10",children:(0,a.jsx)(s.aY,{className:"p-8",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)(l.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},children:(0,a.jsx)(h.Z,{className:"w-16 h-16 text-green-500 mb-4"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-foreground mb-2",children:"Configura\xe7\xe3o Conclu\xedda!"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"Sua conta AWS est\xe1 conectada e pronta para come\xe7ar a economizar."}),(0,a.jsxs)(o.z,{size:"lg",onClick:()=>E.push("/dashboard"),className:"bg-primary text-primary-foreground hover:bg-primary/90",children:["Ir para o Dashboard ",(0,a.jsx)(b.Z,{className:"ml-2 w-4 h-4"})]})]})})})},"completed"):(0,a.jsx)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},children:(0,a.jsxs)(s.Zb,{className:"border-border overflow-hidden",children:[(0,a.jsxs)(s.Ol,{children:[(0,a.jsx)(s.ll,{className:"text-center",children:"Passo 1: Conecte sua Conta AWS"}),(0,a.jsxs)(s.SZ,{className:"text-center",children:["Para come\xe7ar, clique no bot\xe3o abaixo. Voc\xea ser\xe1 redirecionado para o console da AWS para implantar uma stack do CloudFormation.",(0,a.jsx)("br",{}),"Este processo \xe9 ",(0,a.jsx)("strong",{children:"seguro"})," e cria uma role com ",(0,a.jsx)("strong",{children:"permiss\xf5es m\xednimas e de somente leitura"}),", seguindo as melhores pr\xe1ticas da AWS.","trial"===S&&(0,a.jsxs)("span",{className:"block mt-2 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 p-2 rounded-md",children:["Voc\xea est\xe1 no modo ",(0,a.jsx)("strong",{children:"Trial"}),". Apenas permiss\xf5es de leitura ser\xe3o concedidas. Nenhuma a\xe7\xe3o ser\xe1 executada."]})]})]}),(0,a.jsx)(s.aY,{className:"flex justify-center",children:(0,a.jsxs)(o.z,{size:"lg",onClick:()=>{r?(window.open(r,"_blank"),j(!0),C(),e.info("Aguardando confirma\xe7\xe3o da stack no AWS...")):e.info("Gerando link de conex\xe3o, por favor aguarde...")},disabled:x,className:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-lg shadow-primary/20",children:[x?"Aguardando Conex\xe3o...":"Conectar com AWS",!x&&(0,a.jsx)(b.Z,{className:"ml-2 w-4 h-4"})]})})]})},"connect")})]})})}},67469:function(e,r,t){"use strict";t.d(r,{d:function(){return c},z:function(){return d}});var a=t(37821),n=t(58078),o=t(97035),s=t(898),i=t(48908);let c=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,r)=>{let{className:t,variant:n,size:s,asChild:d=!1,isLoading:l,...u}=e,m=d?o.g7:"button",f=u.disabled||!!l;return(0,a.jsx)(m,{className:(0,i.cn)(c({variant:"primary"===n?"default":"danger"===n?"destructive":n,size:s,className:t})),ref:r,disabled:f,...u})});d.displayName="Button"},87769:function(e,r,t){"use strict";t.d(r,{Ol:function(){return o},SZ:function(){return i},Zb:function(){return n},aY:function(){return c},ll:function(){return s}});var a=t(37821);function n(e){let{children:r,className:t=""}=e;return(0,a.jsx)("div",{className:"holo-card relative overflow-hidden bg-background/80 dark:bg-background/60 backdrop-blur-sm rounded-xl rounded-2xl border border-border shadow transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:shadow-primary/10 hover:border-primary/30 ".concat(t),style:{boxShadow:"0 2px 16px 0 rgba(80,80,120,0.06)"},children:r})}function o(e){let{children:r,className:t=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 border-b border-border bg-background/70 dark:bg-background/40 rounded-t-2xl ".concat(t),children:r})}function s(e){let{children:r,className:t=""}=e;return(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground ".concat(t),children:r})}function i(e){let{children:r,className:t=""}=e;return(0,a.jsx)("p",{className:"text-sm text-muted-foreground ".concat(t),children:r})}function c(e){let{children:r,className:t=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 bg-background/60 dark:bg-background/30 rounded-b-2xl ".concat(t),children:r})}t(58078)},92302:function(e,r,t){"use strict";t.d(r,{O:function(){return n}});var a=t(37821);function n(e){let{className:r=""}=e;return(0,a.jsx)("div",{className:"rounded-md bg-background-light bg-gradient-to-r from-transparent via-border-color to-transparent bg-[length:1000px_100%] animate-shimmer ".concat(r),style:{minHeight:24}})}t(58078)},27730:function(e,r,t){"use strict";t.d(r,{ToasterProvider:function(){return d},P:function(){return c}});var a=t(37821),n=t(58078),o=t(48908);function s(e){let{variant:r="info",message:t,className:n,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("px-4 py-2 rounded shadow-md flex items-center gap-2 text-sm font-medium transition-colors duration-150","success"===r?"bg-accent-green text-white":"error"===r?"bg-accent-red text-white":"bg-primary text-white",n),...s,children:t})}let i=n.createContext(void 0);function c(){let e=n.useContext(i);if(!e)throw Error("useToaster must be used within ToasterProvider");return e}function d(e){let{children:r}=e,[t,o]=n.useState([]);return(0,a.jsxs)(i.Provider,{value:{showToast:e=>{o(r=>[...r,e]),setTimeout(()=>{o(e=>e.slice(1))},3500)}},children:[r,(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2",children:t.map((e,r)=>(0,a.jsx)(s,{...e},r))})]})}},84089:function(e,r,t){"use strict";t.d(r,{d:function(){return n}});var a=t(27730);function n(){let{showToast:e}=(0,a.P)();return{success:r=>e({variant:"success",message:r}),error:r=>e({variant:"error",message:r}),info:r=>e({variant:"info",message:r})}}},88954:function(e){"use strict";e.exports={joinUrl:function(e,r){if(!e&&!r)return"";if(!e)return r||"";if(!r)return e.replace(/\/+$|^(\s*)$/g,"");let t=String(e).trim().replace(/\/+$/,""),a=String(r).trim().replace(/^\/+|\/+$/g,"");return"".concat(t,"/").concat(a)}},e.exports.default=e.exports.joinUrl},48908:function(e,r,t){"use strict";t.d(r,{cn:function(){return s},p6:function(){return c},xG:function(){return i}});var a=t(52605),n=t(31638);t(59792);let{joinUrl:o}=t(88954);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,a.W)(r))}function i(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",t="pt-BR"===r?"BRL":"USD";try{return new Intl.NumberFormat(r,{style:"currency",currency:t}).format(e)}catch(r){return console.error("Error formatting currency:",r),"".concat("BRL"===t?"R$":"$").concat(e.toFixed(2))}}function c(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";try{let t=new Date(e);if(isNaN(t.getTime()))return String(e||"");return new Intl.DateTimeFormat(r,{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)}catch(r){return console.error("Error formatting date:",r),String(e)}}}},function(e){e.O(0,[4654,1634,4504,7115,2364,1744],function(){return e(e.s=69787)}),_N_E=e.O()}]);