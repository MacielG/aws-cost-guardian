(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{50906:function(e,n,t){Promise.resolve().then(t.bind(t,23253))},23253:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s}});var r=t(37821),o=t(35450),u=t(58504),i=t(58078),l=t(20136);function s(e){let{children:n}=e,{user:t,isLoadingAuth:s}=(0,o.a)(),a=(0,u.useRouter)(),c=((null==t?void 0:t["cognito:groups"])||[]).includes("Admins");return((0,i.useEffect)(()=>{!s&&(c||a.replace("/dashboard"))},[s,c,a]),s||!c)?(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)(l.T,{size:"lg"})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Layout Seguro do Admin"}),n]})}},35450:function(e,n,t){"use strict";t.d(n,{AuthProvider:function(){return a},a:function(){return c}});var r=t(37821),o=t(58078),u=t(15740),i=t(36846),l=t(83403);let s=(0,o.createContext)(void 0);function a(e){let{children:n}=e,[t,a]=(0,o.useState)(null),[c,d]=(0,o.useState)(null),[f,h]=(0,o.useState)(!0),v=async()=>{var e,n,t,r,o,l,s,c;h(!0);try{let c=await (0,u.t)(),f=await (0,i.y)();if(!(null===(e=f.tokens)||void 0===e?void 0:e.idToken)){console.warn("Sess\xe3o sem token v\xe1lido"),a(null),d(null);return}a({username:c.username,userId:c.userId,email:null===(r=f.tokens)||void 0===r?void 0:null===(t=r.idToken)||void 0===t?void 0:null===(n=t.payload)||void 0===n?void 0:n.email,"cognito:groups":null===(s=f.tokens)||void 0===s?void 0:null===(l=s.idToken)||void 0===l?void 0:null===(o=l.payload)||void 0===o?void 0:o["cognito:groups"]}),d(f)}catch(e){console.warn("Erro ao carregar usu\xe1rio:",(null==e?void 0:e.message)||e),((null==e?void 0:e.name)==="InvalidCharacterError"||(null==e?void 0:null===(c=e.message)||void 0===c?void 0:c.includes("token")))&&(localStorage.clear(),sessionStorage.clear()),a(null),d(null)}finally{h(!1)}};(0,o.useEffect)(()=>{v()},[]);let m=async()=>{try{await (0,l.w)(),a(null),d(null),localStorage.clear(),sessionStorage.clear()}catch(e){console.error("Erro ao fazer logout:",e),localStorage.clear(),sessionStorage.clear(),a(null),d(null)}},g=async()=>{await v()};return(0,r.jsx)(s.Provider,{value:{user:t,session:c,isAuthenticated:!!t,isLoadingAuth:f,signOut:m,refreshUser:g},children:n})}function c(){let e=(0,o.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},20136:function(e,n,t){"use strict";t.d(n,{G:function(){return u},T:function(){return o}});var r=t(37821);function o(e){let{size:n="md",className:t=""}=e;return(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full border-b-2 border-blue-600 ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[n]," ").concat(t)})}function u(e){let{message:n="Carregando..."}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)(o,{size:"lg"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:n})]})}t(58078)},58504:function(e,n,t){"use strict";var r=t(93226);t.o(r,"usePathname")&&t.d(n,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(n,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(n,{useSearchParams:function(){return r.useSearchParams}})},59792:function(e){var n,t,r,o=e.exports={};function u(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===u||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:u}catch(e){n=u}try{t="function"==typeof clearTimeout?clearTimeout:i}catch(e){t=i}}();var s=[],a=!1,c=-1;function d(){a&&r&&(a=!1,r.length?s=r.concat(s):c=-1,s.length&&f())}function f(){if(!a){var e=l(d);a=!0;for(var n=s.length;n;){for(r=s,s=[];++c<n;)r&&r[c].run();c=-1,n=s.length}r=null,a=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(n){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function h(e,n){this.fun=e,this.array=n}function v(){}o.nextTick=function(e){var n=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];s.push(new h(e,n)),1!==s.length||a||l(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},function(e){e.O(0,[6846,238,7115,2364,1744],function(){return e(e.s=50906)}),_N_E=e.O()}]);