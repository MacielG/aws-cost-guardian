"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8127],{58504:function(e,t,i){var n=i(93226);i.o(n,"usePathname")&&i.d(t,{usePathname:function(){return n.usePathname}}),i.o(n,"useRouter")&&i.d(t,{useRouter:function(){return n.useRouter}}),i.o(n,"useSearchParams")&&i.d(t,{useSearchParams:function(){return n.useSearchParams}})},27315:function(e,t,i){function n(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}i.d(t,{V:function(){return M}});var r=function e(t,i){function r(e,r,s){if("undefined"!=typeof document){"number"==typeof(s=n({},i,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var a in s)s[a]&&(d+="; "+a,!0!==s[a]&&(d+="="+s[a].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+d}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],n={},r=0;r<i.length;r++){var s=i[r].split("="),d=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(n[a]=t.read(d,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){r(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class s{constructor(e={}){let{path:t,domain:i,expires:n,sameSite:r,secure:s}=e;if(this.domain=i,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?n:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||s,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!r||!["strict","lax","none"].includes(r))throw Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===r&&!this.secure)throw Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=r}}async setItem(e,t){r.set(e,t,this.getData())}async getItem(e){return r.get(e)??null}async removeItem(e){r.remove(e,this.getData())}async clear(){let e=Object.keys(r.get()).map(e=>this.removeItem(e));await Promise.all(e)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}var d=i(80535),a=i(98504),o=i(91358),c=i(71609);i(93201),i(4397);var l=i(91010),u=i(58812),h=i(5051),y=i(64804),I=i(26392),p=i(10597);let g="cognito-identity",f={service:g,retryDecider:(0,p.j)(h.f),computeDelay:I.k,cache:"no-store"};var C=i(45606);let m=(0,i(5571).V)(C.y,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),w=e=>(t,i)=>S(i,v(e),JSON.stringify(t)),v=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),S=({url:e},t,i)=>({headers:t,url:e,body:i,method:"POST"}),A=e=>(0,y.z)(m,w("GetCredentialsForIdentity"),_,{...f,...e,userAgentValue:(0,l.Zm)()}),_=async e=>{if(e.statusCode>=300)throw await (0,h.f)(e);let t=await (0,h.e)(e);return{IdentityId:t.IdentityId,Credentials:k(t.Credentials),$metadata:(0,u.B)(e)}},k=({Expiration:e,...t}={})=>({...t,Expiration:e&&new Date(1e3*e)});var x=i(30209),T=i(39674),P=i(17335),b=i(61124),K=i(50273),R=i(73054),E=i(49543);let D=({region:e})=>({url:new E.a(`https://${g}.${e}.${(0,R.b)(e)}`)}),O=({endpointOverride:e})=>t=>e?{url:new E.a(e)}:D(t),G=e=>(0,y.z)(m,w("GetId"),V,{...f,...e,userAgentValue:(0,l.Zm)()}),V=async e=>{if(e.statusCode>=300)throw await (0,h.f)(e);return{IdentityId:(await (0,h.e)(e)).IdentityId,$metadata:(0,u.B)(e)}};function j(e){let t=(0,x.xp)(e).payload.iss,i={};if(!t)throw new T.l({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return i[t.replace(/(^\w+:|^)\/\//,"")]=e,i}async function F({tokens:e,authConfig:t,identityIdStore:i}){i.setAuthConfig({Cognito:t});let n=await i.loadIdentityId();if(n)return n.id;let r=e?.idToken?j(e.idToken.toString()):{},s=await N(r,t);return i.storeIdentityId({id:s,type:e?"primary":"guest"}),s}async function N(e,t){let i;let n=t?.identityPoolId,r=(0,b.N)(n),s=G({endpointResolver:O({endpointOverride:t.identityPoolEndpoint})});try{i=(await s({region:r},{IdentityPoolId:n,Logins:e})).IdentityId}catch(e){throw(0,P.R)(e),new T.l(e)}if(!i)throw new T.l({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}let L=new c.k("CognitoCredentialsProvider");class U{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){L.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){L.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){let t=e.authenticated,{tokens:i}=e,{authConfig:n}=e;try{(0,x.YE)(n?.Cognito)}catch{return}if(!t&&!n.Cognito.allowGuestAccess)return;let{forceRefresh:r}=e,s=this.hasTokenChanged(i),d=await F({tokens:i,authConfig:n.Cognito,identityIdStore:this._identityIdStore});return((r||s)&&this.clearCredentials(),t)?((0,K.Cg)(i),this.credsForOIDCTokens(n.Cognito,i,d)):this.getGuestCredentials(d,n.Cognito)}async getGuestCredentials(e,t){let i;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return L.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let n=(0,b.N)(t.identityPoolId),r=A({endpointResolver:O({endpointOverride:t.identityPoolEndpoint})});try{i=await r({region:n},{IdentityId:e})}catch(e){throw(0,P.R)(e),new T.l(e)}if(i?.Credentials?.AccessKeyId&&i?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let t={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:e};return i.IdentityId&&(t.identityId=i.IdentityId,this._identityIdStore.storeIdentityId({id:i.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new T.l({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,i){let n;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return L.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let r=t.idToken?j(t.idToken.toString()):{},s=(0,b.N)(e.identityPoolId),d=A({endpointResolver:O({endpointOverride:e.identityPoolEndpoint})});try{n=await d({region:s},{IdentityId:i,Logins:r})}catch(e){throw(0,P.R)(e),new T.l(e)}if(n?.Credentials?.AccessKeyId&&n?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let e={credentials:{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration},identityId:i};return n.IdentityId&&(e.identityId=n.IdentityId,this._identityIdStore.storeIdentityId({id:n.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},e}throw new T.l({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}var $=i(78262);let z={identityId:"identityId"},B=new c.k("DefaultIdentityIdStore");class Y{setAuthConfig(e){(0,x.YE)(e.Cognito),this.authConfig=e,this._authKeys=Z("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){(0,x.YE)(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let e=await this.keyValueStorage.getItem(this._authKeys.identityId);if(e)return this._hasGuestIdentityId=!0,{id:e,type:"guest"};return null}}catch(e){return B.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){(0,x.YE)(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}let Z=(e,t)=>(0,$._X)(z)(`com.amplify.${e}`,t),q=new U(new Y(d.Fm));var J=i(19634);let M={configure(e,t){let i=(0,o.h)(e),n=new s({sameSite:"lax"}),r=t?.ssr?n:d.Fm,c=t?.ssr?new U(new Y(n)):q;if(!i.Auth||t?.Auth){a.d.configure(i,t);return}if(!a.d.libraryOptions.Auth){J.D.setAuthConfig(i.Auth),J.D.setKeyValueStorage(r),a.d.configure(i,{...t,Auth:{tokenProvider:J.D,credentialsProvider:c}});return}if(t){let e=a.d.libraryOptions.Auth;void 0!==t.ssr&&(J.D.setKeyValueStorage(r),e.credentialsProvider=c),a.d.configure(i,{Auth:e,...t});return}a.d.configure(i)},getConfig:()=>a.d.getConfig()}}}]);