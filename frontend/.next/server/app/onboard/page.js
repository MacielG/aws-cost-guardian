(()=>{var e={};e.id=413,e.ids=[413],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6078:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>l,pages:()=>d,routeModule:()=>x,tree:()=>u});var a=r(7096),s=r(6132),o=r(7284),n=r.n(o),i=r(2564),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let u=["",{children:["onboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4124)),"C:\\Users\\Guilherme\\Documents\\Github\\aws-cost-guardian\\frontend\\app\\onboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4943)),"C:\\Users\\Guilherme\\Documents\\Github\\aws-cost-guardian\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,4293)),"C:\\Users\\Guilherme\\Documents\\Github\\aws-cost-guardian\\frontend\\app\\not-found.tsx"]}],d=["C:\\Users\\Guilherme\\Documents\\Github\\aws-cost-guardian\\frontend\\app\\onboard\\page.tsx"],l="/onboard/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/onboard/page",pathname:"/onboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},1673:(e,t,r)=>{Promise.resolve().then(r.bind(r,6064))},6064:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Onboard});var a=r(784),s=r(7870),o=r(5555),n=r(9885),i=r(7114);function Onboard(){let{t:e}=(0,s.$G)(),[t,r]=(0,n.useState)(""),[c,u]=(0,n.useState)("PENDING_CFN"),[d,l]=(0,n.useState)(!1),p=(0,i.useRouter)(),x=(0,n.useCallback)(async()=>{let e=await fetch("/api/onboard-init");if(e.ok){let t=await e.json();if(!1===t.termsAccepted){p.push("/terms");return}u(t.status),"COMPLETED"===t.status&&p.push("/dashboard")}},[p]),m=(0,n.useCallback)(async()=>{let e=await fetch("/api/onboard-init",{headers:{}});if(e.ok){let t=await e.json();u(t.status);let a=`${window.location.origin}/api/onboard`,s=`https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/create/review?templateURL=https://s3.amazonaws.com/cost-guardian-templates/cost-guardian-template.yaml&stackName=CostGuardianStack&param_ExternalId=${t.externalId}&param_PlatformAccountId=${t.platformAccountId}&param_CallbackUrl=${encodeURIComponent(a)}`;r(s)}},[]);return(0,n.useEffect)(()=>{m()},[m]),(0,n.useEffect)(()=>{if(d&&"COMPLETED"!==c){let e=setInterval(x,5e3);return()=>clearInterval(e)}},[d,c,x]),(0,a.jsxs)("div",{className:"p-8",children:[a.jsx("h1",{children:e("connectAws")}),"COMPLETED"===c?(0,a.jsxs)("div",{className:"mt-4 p-4 bg-green-100 text-green-800 rounded",children:[a.jsx("p",{children:"âœ… Conex\xe3o com a AWS realizada com sucesso!"}),a.jsx("p",{children:"Voc\xea ser\xe1 redirecionado para o dashboard..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.z,{onClick:()=>{t?(window.open(t,"_blank"),l(!0)):alert("Gerando link de conex\xe3o, por favor aguarde...")},className:"mt-4",disabled:!t||d,children:d?"Aguardando conex\xe3o...":"1. Conectar AWS (Abrir CloudFormation)"}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:d?"Ap\xf3s criar a stack no console da AWS, pode fechar a aba e voltar para c\xe1. Estamos aguardando a confirma\xe7\xe3o autom\xe1tica.":"Isto abrir\xe1 o console da AWS para voc\xea criar a role de acesso. \xc9 seguro e transparente."})]})]})}},4124:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>o,default:()=>c});var a=r(5153);let s=(0,a.createProxy)(String.raw`C:\Users\Guilherme\Documents\Github\aws-cost-guardian\frontend\app\onboard\page.tsx`),{__esModule:o,$$typeof:n}=s,i=s.default,c=i},7114:(e,t,r)=>{e.exports=r(4979)}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[98,734,870,924,555],()=>__webpack_exec__(6078));module.exports=r})();