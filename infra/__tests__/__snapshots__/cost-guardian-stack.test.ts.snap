// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`CostGuardianStack: Testes de Asserção e Segurança Snapshot do Stack está consistente 1`] = `
{
  "Outputs": {
    "APIUrl": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "CostGuardianAPID69A7606",
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region",
            },
            ".",
            {
              "Ref": "AWS::URLSuffix",
            },
            "/",
            {
              "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
            },
            "/",
          ],
        ],
      },
    },
    "CfnTemplateUrl": {
      "Description": "URL do template do CloudFormation para o onboarding do cliente. Use esta URL no frontend.",
      "Value": "test-full-url",
    },
    "CostGuardianAPIEndpoint220630FB": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "CostGuardianAPID69A7606",
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region",
            },
            ".",
            {
              "Ref": "AWS::URLSuffix",
            },
            "/",
            {
              "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
            },
            "/",
          ],
        ],
      },
    },
    "IdentityPoolId": {
      "Description": "Cognito Identity Pool ID",
      "Value": {
        "Ref": "CostGuardianIdentityPool",
      },
    },
    "SFNArn": {
      "Value": {
        "Ref": "SLAWorkflow733FFDD9",
      },
    },
    "TableName": {
      "Value": {
        "Ref": "CostGuardianTable970FEF22",
      },
    },
    "UserPoolClientId": {
      "Value": {
        "Ref": "CostGuardianUserPoolClient13CE29CE",
      },
    },
    "UserPoolId": {
      "Value": {
        "Ref": "CostGuardianPoolF8005E80",
      },
    },
  },
  "Parameters": {
    "BootstrapVersion": {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": {
    "AdminGroup": {
      "Properties": {
        "Description": "Grupo para administradores da plataforma",
        "GroupName": "Admins",
        "UserPoolId": {
          "Ref": "CostGuardianPoolF8005E80",
        },
      },
      "Type": "AWS::Cognito::UserPoolGroup",
    },
    "AnomalyAlertsTopic5676DBF5": {
      "Type": "AWS::SNS::Topic",
    },
    "ApiHandler5E7490E8": {
      "DependsOn": [
        "ApiHandlerServiceRoleDefaultPolicy10321D87",
        "ApiHandlerServiceRole592E70E9",
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "b84b3d7bd6fff67da8b2d5f6fd16682fdca478b7fd7fa9b63feb80ce889cf9e6.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
            "EXECUTE_RECOMMENDATION_LAMBDA_ARN": {
              "Fn::GetAtt": [
                "ExecuteRecommendation661572F9",
                "Arn",
              ],
            },
            "EXECUTE_RECOMMENDATION_LAMBDA_NAME": {
              "Ref": "ExecuteRecommendation661572F9",
            },
            "FULL_TEMPLATE_URL": "test-full-url",
            "LOG_LEVEL": "DEBUG",
            "PLATFORM_ACCOUNT_ID": {
              "Ref": "AWS::AccountId",
            },
            "STRIPE_SECRET_ARN": {
              "Ref": "StripeSecret80A38A68",
            },
            "STRIPE_WEBHOOK_SECRET_ARN": {
              "Ref": "StripeWebhookSecretFCDDBC6A",
            },
            "TRIAL_TEMPLATE_URL": "test-trial-url",
            "USER_POOL_CLIENT_ID": {
              "Ref": "CostGuardianUserPoolClient13CE29CE",
            },
            "USER_POOL_ID": {
              "Ref": "CostGuardianPoolF8005E80",
            },
          },
        },
        "Handler": "handler.app",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "ApiHandlerLogGroup4D57C896",
          },
        },
        "MemorySize": 1024,
        "ReservedConcurrentExecutions": 100,
        "Role": {
          "Fn::GetAtt": [
            "ApiHandlerServiceRole592E70E9",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Timeout": 29,
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "ApiHandlerLogGroup4D57C896": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 365,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "ApiHandlerServiceRole592E70E9": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "ApiHandlerServiceRoleDefaultPolicy10321D87": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": {
                "Ref": "StripeSecret80A38A68",
              },
            },
            {
              "Action": [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": {
                "Ref": "StripeWebhookSecretFCDDBC6A",
              },
            },
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "ExecuteRecommendation661572F9",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "ExecuteRecommendation661572F9",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "ApiHandlerServiceRoleDefaultPolicy10321D87",
        "Roles": [
          {
            "Ref": "ApiHandlerServiceRole592E70E9",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "ApiWaf": {
      "Properties": {
        "DefaultAction": {
          "Allow": {},
        },
        "Rules": [
          {
            "Name": "AWS-AWSManagedRulesCommonRuleSet",
            "OverrideAction": {
              "None": {},
            },
            "Priority": 1,
            "Statement": {
              "ManagedRuleGroupStatement": {
                "Name": "AWSManagedRulesCommonRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "awsCommonRules",
              "SampledRequestsEnabled": true,
            },
          },
        ],
        "Scope": "REGIONAL",
        "VisibilityConfig": {
          "CloudWatchMetricsEnabled": true,
          "MetricName": "ApiWaf",
          "SampledRequestsEnabled": true,
        },
      },
      "Type": "AWS::WAFv2::WebACL",
    },
    "ApiWafAssociation": {
      "Properties": {
        "ResourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":apigateway:",
              {
                "Ref": "AWS::Region",
              },
              "::/restapis/",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/stages/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
            ],
          ],
        },
        "WebACLArn": {
          "Fn::GetAtt": [
            "ApiWaf",
            "Arn",
          ],
        },
      },
      "Type": "AWS::WAFv2::WebACLAssociation",
    },
    "AutomationSfnLogGroupEFB6F455": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 731,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "AutomationWorkflow31EDE987": {
      "DeletionPolicy": "Delete",
      "DependsOn": [
        "AutomationWorkflowRoleDefaultPolicyFB4275E5",
        "AutomationWorkflowRole7528A909",
      ],
      "Properties": {
        "DefinitionString": {
          "Fn::Join": [
            "",
            [
              "{"StartAt":"RunAllAutomations","States":{"RunAllAutomations":{"Type":"Parallel","End":true,"Branches":[{"StartAt":"StopIdleResources","States":{"StopIdleResources":{"End":true,"Retry":[{"ErrorEquals":["Lambda.ClientExecutionTimeoutException","Lambda.ServiceException","Lambda.AWSLambdaException","Lambda.SdkClientException"],"IntervalSeconds":2,"MaxAttempts":6,"BackoffRate":2},{"ErrorEquals":["States.TaskFailed"],"IntervalSeconds":2,"MaxAttempts":3,"BackoffRate":2}],"Catch":[{"ErrorEquals":["States.ALL"],"ResultPath":"$.error","Next":"StopIdleFailed"}],"Type":"Task","OutputPath":"$.Payload","Resource":"arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":states:::lambda:invoke","Parameters":{"FunctionName":"",
              {
                "Fn::GetAtt": [
                  "StopIdleInstancesF236D216",
                  "Arn",
                ],
              },
              "","Payload.$":"$"}},"StopIdleFailed":{"Type":"Fail","Error":"StopIdleError","Cause":"Stop idle resources failed"}}},{"StartAt":"DeleteUnusedVolumes","States":{"DeleteUnusedVolumes":{"End":true,"Retry":[{"ErrorEquals":["Lambda.ClientExecutionTimeoutException","Lambda.ServiceException","Lambda.AWSLambdaException","Lambda.SdkClientException"],"IntervalSeconds":2,"MaxAttempts":6,"BackoffRate":2},{"ErrorEquals":["States.TaskFailed"],"IntervalSeconds":2,"MaxAttempts":3,"BackoffRate":2}],"Catch":[{"ErrorEquals":["States.ALL"],"ResultPath":"$.error","Next":"DeleteEbsFailed"}],"Type":"Task","OutputPath":"$.Payload","Resource":"arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":states:::lambda:invoke","Parameters":{"FunctionName":"",
              {
                "Fn::GetAtt": [
                  "DeleteUnusedEbs3A5FAC7B",
                  "Arn",
                ],
              },
              "","Payload.$":"$"}},"DeleteEbsFailed":{"Type":"Fail","Error":"DeleteEbsError","Cause":"Delete unused volumes failed"}}},{"StartAt":"RecommendIdleRds","States":{"RecommendIdleRds":{"End":true,"Retry":[{"ErrorEquals":["Lambda.ClientExecutionTimeoutException","Lambda.ServiceException","Lambda.AWSLambdaException","Lambda.SdkClientException"],"IntervalSeconds":2,"MaxAttempts":6,"BackoffRate":2},{"ErrorEquals":["States.TaskFailed"],"IntervalSeconds":2,"MaxAttempts":3,"BackoffRate":2}],"Catch":[{"ErrorEquals":["States.ALL"],"ResultPath":"$.error","Next":"RecommendRdsFailed"}],"Type":"Task","OutputPath":"$.Payload","Resource":"arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":states:::lambda:invoke","Parameters":{"FunctionName":"",
              {
                "Fn::GetAtt": [
                  "RecommendRdsIdle878468E8",
                  "Arn",
                ],
              },
              "","Payload.$":"$"}},"RecommendRdsFailed":{"Type":"Fail","Error":"RecommendRdsError","Cause":"Recommend idle RDS failed"}}}]}}}",
            ],
          ],
        },
        "LoggingConfiguration": {
          "Destinations": [
            {
              "CloudWatchLogsLogGroup": {
                "LogGroupArn": {
                  "Fn::GetAtt": [
                    "AutomationSfnLogGroupEFB6F455",
                    "Arn",
                  ],
                },
              },
            },
          ],
          "Level": "ALL",
        },
        "RoleArn": {
          "Fn::GetAtt": [
            "AutomationWorkflowRole7528A909",
            "Arn",
          ],
        },
        "StateMachineName": "AutomationWorkflow",
        "TracingConfiguration": {
          "Enabled": true,
        },
      },
      "Type": "AWS::StepFunctions::StateMachine",
      "UpdateReplacePolicy": "Delete",
    },
    "AutomationWorkflowEventsRole4334F553": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "events.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "AutomationWorkflowEventsRoleDefaultPolicy91A0192B": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "states:StartExecution",
              "Effect": "Allow",
              "Resource": {
                "Ref": "AutomationWorkflow31EDE987",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "AutomationWorkflowEventsRoleDefaultPolicy91A0192B",
        "Roles": [
          {
            "Ref": "AutomationWorkflowEventsRole4334F553",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "AutomationWorkflowRole7528A909": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "states.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "AutomationWorkflowRoleDefaultPolicyFB4275E5": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "StopIdleInstancesF236D216",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "StopIdleInstancesF236D216",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "DeleteUnusedEbs3A5FAC7B",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "DeleteUnusedEbs3A5FAC7B",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "RecommendRdsIdle878468E8",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "RecommendRdsIdle878468E8",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": [
                "logs:CreateLogDelivery",
                "logs:GetLogDelivery",
                "logs:UpdateLogDelivery",
                "logs:DeleteLogDelivery",
                "logs:ListLogDeliveries",
                "logs:PutResourcePolicy",
                "logs:DescribeResourcePolicies",
                "logs:DescribeLogGroups",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            {
              "Action": [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
                "xray:GetSamplingRules",
                "xray:GetSamplingTargets",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "AutomationWorkflowRoleDefaultPolicyFB4275E5",
        "Roles": [
          {
            "Ref": "AutomationWorkflowRole7528A909",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "CfnTemplateBucket4840C65E": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "KMSMasterKeyID": {
                "Fn::GetAtt": [
                  "S3Key58EFA89C",
                  "Arn",
                ],
              },
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "LifecycleConfiguration": {
          "Rules": [
            {
              "ExpirationInDays": 90,
              "Id": "DefaultLifecycle",
              "NoncurrentVersionExpiration": {
                "NoncurrentDays": 30,
              },
              "NoncurrentVersionTransitions": [
                {
                  "StorageClass": "GLACIER",
                  "TransitionInDays": 30,
                },
              ],
              "Status": "Enabled",
              "Transitions": [
                {
                  "StorageClass": "INTELLIGENT_TIERING",
                  "TransitionInDays": 90,
                },
              ],
            },
          ],
        },
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": false,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": false,
        },
        "VersioningConfiguration": {
          "Status": "Enabled",
        },
        "WebsiteConfiguration": {
          "IndexDocument": "template.yaml",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Delete",
    },
    "CfnTemplateBucketPolicyCC45C421": {
      "Properties": {
        "Bucket": {
          "Ref": "CfnTemplateBucket4840C65E",
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:GetObject",
              "Effect": "Allow",
              "Principal": {
                "AWS": "*",
              },
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    {
                      "Fn::GetAtt": [
                        "CfnTemplateBucket4840C65E",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "CognitoAuth8E818E2A": {
      "Properties": {
        "IdentitySource": "method.request.header.Authorization",
        "Name": "MyTestStackCognitoAuth26D6C1F6",
        "ProviderARNs": [
          {
            "Fn::GetAtt": [
              "CostGuardianPoolF8005E80",
              "Arn",
            ],
          },
        ],
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
        "Type": "COGNITO_USER_POOLS",
      },
      "Type": "AWS::ApiGateway::Authorizer",
    },
    "CostGuardianAPIAccount30F91D25": {
      "DeletionPolicy": "Retain",
      "DependsOn": [
        "CostGuardianAPID69A7606",
      ],
      "Properties": {
        "CloudWatchRoleArn": {
          "Fn::GetAtt": [
            "CostGuardianAPICloudWatchRole903ADC0D",
            "Arn",
          ],
        },
      },
      "Type": "AWS::ApiGateway::Account",
      "UpdateReplacePolicy": "Retain",
    },
    "CostGuardianAPICloudWatchRole903ADC0D": {
      "DeletionPolicy": "Retain",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "apigateway.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
      "UpdateReplacePolicy": "Retain",
    },
    "CostGuardianAPID69A7606": {
      "Properties": {
        "Name": "CostGuardianApi",
      },
      "Type": "AWS::ApiGateway::RestApi",
    },
    "CostGuardianAPIDeployment48440B88c3236c76c197bb3744f72b0c884475ed": {
      "DependsOn": [
        "CostGuardianAPIapiaccepttermsOPTIONS45388E88",
        "CostGuardianAPIapiaccepttermsPOSTD1D1BAEE",
        "CostGuardianAPIapiacceptterms4B3A5399",
        "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoiceOPTIONS90E209F7",
        "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoicePOST6EAF8DA2",
        "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoice5677CF9A",
        "CostGuardianAPIapiadminclaimscustomerIdclaimIdOPTIONS50B3A53C",
        "CostGuardianAPIapiadminclaimscustomerIdclaimId87958679",
        "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatusOPTIONSA7C612BC",
        "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatusPUT1BBE828B",
        "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatus41C259ED",
        "CostGuardianAPIapiadminclaimscustomerIdOPTIONS9E8702EA",
        "CostGuardianAPIapiadminclaimscustomerIdF6C1F382",
        "CostGuardianAPIapiadminclaimsGETBE1B9F61",
        "CostGuardianAPIapiadminclaimsOPTIONS0CC387E3",
        "CostGuardianAPIapiadminclaims4A786205",
        "CostGuardianAPIapiadminOPTIONS4B468F55",
        "CostGuardianAPIapiadminD109432D",
        "CostGuardianAPIapialertsGET0FCFE1F8",
        "CostGuardianAPIapialertsOPTIONS5AD2FB0F",
        "CostGuardianAPIapialerts0A84B897",
        "CostGuardianAPIapibillingOPTIONSEA7DE10E",
        "CostGuardianAPIapibillingB169DD97",
        "CostGuardianAPIapibillingsummaryGETD76E3421",
        "CostGuardianAPIapibillingsummaryOPTIONSF6BD3F8C",
        "CostGuardianAPIapibillingsummary88D20634",
        "CostGuardianAPIapiconnectionsawsAccountIdDELETECFFEB3C9",
        "CostGuardianAPIapiconnectionsawsAccountIdOPTIONSF44030DC",
        "CostGuardianAPIapiconnectionsawsAccountId65FE6DE5",
        "CostGuardianAPIapiconnectionsGET6502CC14",
        "CostGuardianAPIapiconnectionsOPTIONS181E365A",
        "CostGuardianAPIapiconnectionsDBFBAF7C",
        "CostGuardianAPIapidashboardcostsGET7289A53C",
        "CostGuardianAPIapidashboardcostsOPTIONS9AF94A33",
        "CostGuardianAPIapidashboardcosts2A3A7F7B",
        "CostGuardianAPIapidashboardOPTIONS1121BB40",
        "CostGuardianAPIapidashboardE28A9DDF",
        "CostGuardianAPIapihealthGETF355F2CE",
        "CostGuardianAPIapihealthOPTIONS69537CF8",
        "CostGuardianAPIapihealthA1116529",
        "CostGuardianAPIapiincidentsGET5B972662",
        "CostGuardianAPIapiincidentsOPTIONS05C829BC",
        "CostGuardianAPIapiincidentsCE40791B",
        "CostGuardianAPIapiinvoicesGETB1B09053",
        "CostGuardianAPIapiinvoicesOPTIONS02EF9251",
        "CostGuardianAPIapiinvoicesED00D003",
        "CostGuardianAPIapionboardinitGET3FA3C79E",
        "CostGuardianAPIapionboardinitOPTIONS37CF44A7",
        "CostGuardianAPIapionboardinitA579DF91",
        "CostGuardianAPIapionboardOPTIONSF931A347",
        "CostGuardianAPIapionboardPOST34D0592C",
        "CostGuardianAPIapionboard95340DCC",
        "CostGuardianAPIapiOPTIONS55E74C09",
        "CostGuardianAPIapirecommendationsexecuteOPTIONSFF3B4703",
        "CostGuardianAPIapirecommendationsexecutePOST0CD90BBF",
        "CostGuardianAPIapirecommendationsexecuteEBCB6C8B",
        "CostGuardianAPIapirecommendationsGETE966C99B",
        "CostGuardianAPIapirecommendationsOPTIONSF05A6C14",
        "CostGuardianAPIapirecommendations3A5D580C",
        "CostGuardianAPIapi2A7FECEB",
        "CostGuardianAPIapisettingsautomationGETA8235FA2",
        "CostGuardianAPIapisettingsautomationOPTIONS73998BBF",
        "CostGuardianAPIapisettingsautomationPOST3C334858",
        "CostGuardianAPIapisettingsautomation35B5C7F3",
        "CostGuardianAPIapisettingsOPTIONS07E5CF5E",
        "CostGuardianAPIapisettings9F211713",
        "CostGuardianAPIapislaclaimsGET866BA3BB",
        "CostGuardianAPIapislaclaimsOPTIONS813BF07E",
        "CostGuardianAPIapislaclaims8BA01858",
        "CostGuardianAPIapislareportsclaimIdGET017FA1FD",
        "CostGuardianAPIapislareportsclaimIdOPTIONS0DA99BCE",
        "CostGuardianAPIapislareportsclaimId495DD90F",
        "CostGuardianAPIapislareportsOPTIONS1A7A34D8",
        "CostGuardianAPIapislareports096EC275",
        "CostGuardianAPIapistripeOPTIONSBF604CA1",
        "CostGuardianAPIapistripeD59C59BC",
        "CostGuardianAPIapistripewebhookOPTIONS2AA35D74",
        "CostGuardianAPIapistripewebhookPOST1744F96C",
        "CostGuardianAPIapistripewebhook31251436",
        "CostGuardianAPIapiupgradeOPTIONS52102A0D",
        "CostGuardianAPIapiupgradePOST26DBB04B",
        "CostGuardianAPIapiupgrade1D7FAC45",
        "CostGuardianAPIOPTIONS325659A2",
      ],
      "Metadata": {
        "aws:cdk:do-not-refactor": true,
      },
      "Properties": {
        "Description": "Automatically created by the RestApi construct",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Deployment",
    },
    "CostGuardianAPIDeploymentStageprod2322FA4F": {
      "DependsOn": [
        "CostGuardianAPIAccount30F91D25",
      ],
      "Properties": {
        "DeploymentId": {
          "Ref": "CostGuardianAPIDeployment48440B88c3236c76c197bb3744f72b0c884475ed",
        },
        "MethodSettings": [
          {
            "DataTraceEnabled": false,
            "HttpMethod": "*",
            "ResourcePath": "/*",
            "ThrottlingBurstLimit": 50,
            "ThrottlingRateLimit": 100,
          },
          {
            "DataTraceEnabled": false,
            "HttpMethod": "*",
            "ResourcePath": "/*",
            "ThrottlingBurstLimit": 50,
            "ThrottlingRateLimit": 100,
          },
        ],
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
        "StageName": "prod",
        "TracingEnabled": true,
      },
      "Type": "AWS::ApiGateway::Stage",
    },
    "CostGuardianAPIOPTIONS325659A2": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Fn::GetAtt": [
            "CostGuardianAPID69A7606",
            "RootResourceId",
          ],
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapi2A7FECEB": {
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "CostGuardianAPID69A7606",
            "RootResourceId",
          ],
        },
        "PathPart": "api",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiOPTIONS55E74C09": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiacceptterms4B3A5399": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "accept-terms",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiaccepttermsOPTIONS45388E88": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiacceptterms4B3A5399",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiaccepttermsPOSTApiPermissionMyTestStackCostGuardianAPIAE2E7CE0POSTapiaccepttermsD7DC6982": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/POST/api/accept-terms",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiaccepttermsPOSTApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0POSTapiacceptterms1C9977BE": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/POST/api/accept-terms",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiaccepttermsPOSTD1D1BAEE": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "POST",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapiacceptterms4B3A5399",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminD109432D": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "admin",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiadminOPTIONS4B468F55": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiadminD109432D",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminclaims4A786205": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapiadminD109432D",
        },
        "PathPart": "claims",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiadminclaimsGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapiadminclaims22ED3AC3": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/admin/claims",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiadminclaimsGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapiadminclaimsE2D72E7D": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/admin/claims",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiadminclaimsGETBE1B9F61": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapiadminclaims4A786205",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminclaimsOPTIONS0CC387E3": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiadminclaims4A786205",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminclaimscustomerIdF6C1F382": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapiadminclaims4A786205",
        },
        "PathPart": "{customerId}",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiadminclaimscustomerIdOPTIONS9E8702EA": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiadminclaimscustomerIdF6C1F382",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimId87958679": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapiadminclaimscustomerIdF6C1F382",
        },
        "PathPart": "{claimId}",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdOPTIONS50B3A53C": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiadminclaimscustomerIdclaimId87958679",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoice5677CF9A": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapiadminclaimscustomerIdclaimId87958679",
        },
        "PathPart": "create-invoice",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoiceOPTIONS90E209F7": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoice5677CF9A",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoicePOST6EAF8DA2": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "POST",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoice5677CF9A",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoicePOSTApiPermissionMyTestStackCostGuardianAPIAE2E7CE0POSTapiadminclaimscustomerIdclaimIdcreateinvoice0C55CD05": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/POST/api/admin/claims/*/*/create-invoice",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdcreateinvoicePOSTApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0POSTapiadminclaimscustomerIdclaimIdcreateinvoiceA24624C6": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/POST/api/admin/claims/*/*/create-invoice",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatus41C259ED": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapiadminclaimscustomerIdclaimId87958679",
        },
        "PathPart": "status",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatusOPTIONSA7C612BC": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatus41C259ED",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatusPUT1BBE828B": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "PUT",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatus41C259ED",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatusPUTApiPermissionMyTestStackCostGuardianAPIAE2E7CE0PUTapiadminclaimscustomerIdclaimIdstatus34C03C83": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/PUT/api/admin/claims/*/*/status",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiadminclaimscustomerIdclaimIdstatusPUTApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0PUTapiadminclaimscustomerIdclaimIdstatusDDF8E225": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/PUT/api/admin/claims/*/*/status",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapialerts0A84B897": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "alerts",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapialertsGET0FCFE1F8": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapialerts0A84B897",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapialertsGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapialerts9B47AF27": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/alerts",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapialertsGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapialerts648969DB": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/alerts",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapialertsOPTIONS5AD2FB0F": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapialerts0A84B897",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapibillingB169DD97": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "billing",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapibillingOPTIONSEA7DE10E": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapibillingB169DD97",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapibillingsummary88D20634": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapibillingB169DD97",
        },
        "PathPart": "summary",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapibillingsummaryGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapibillingsummary353CC0B2": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/billing/summary",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapibillingsummaryGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapibillingsummary34A3A150": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/billing/summary",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapibillingsummaryGETD76E3421": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapibillingsummary88D20634",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapibillingsummaryOPTIONSF6BD3F8C": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapibillingsummary88D20634",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiconnectionsDBFBAF7C": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "connections",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiconnectionsGET6502CC14": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapiconnectionsDBFBAF7C",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiconnectionsGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapiconnections46D576A6": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/connections",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiconnectionsGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapiconnectionsECD1C283": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/connections",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiconnectionsOPTIONS181E365A": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiconnectionsDBFBAF7C",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiconnectionsawsAccountId65FE6DE5": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapiconnectionsDBFBAF7C",
        },
        "PathPart": "{awsAccountId}",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiconnectionsawsAccountIdDELETEApiPermissionMyTestStackCostGuardianAPIAE2E7CE0DELETEapiconnectionsawsAccountIdE0EC5B22": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/DELETE/api/connections/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiconnectionsawsAccountIdDELETEApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0DELETEapiconnectionsawsAccountIdBF3CEA17": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/DELETE/api/connections/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiconnectionsawsAccountIdDELETECFFEB3C9": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "DELETE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapiconnectionsawsAccountId65FE6DE5",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiconnectionsawsAccountIdOPTIONSF44030DC": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiconnectionsawsAccountId65FE6DE5",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapidashboardE28A9DDF": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "dashboard",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapidashboardOPTIONS1121BB40": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapidashboardE28A9DDF",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapidashboardcosts2A3A7F7B": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapidashboardE28A9DDF",
        },
        "PathPart": "costs",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapidashboardcostsGET7289A53C": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapidashboardcosts2A3A7F7B",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapidashboardcostsGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapidashboardcosts6BB739EC": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/dashboard/costs",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapidashboardcostsGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapidashboardcosts3475F78F": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/dashboard/costs",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapidashboardcostsOPTIONS9AF94A33": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapidashboardcosts2A3A7F7B",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapihealthA1116529": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "health",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapihealthGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapihealthC645D6A4": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/health",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapihealthGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapihealthE5C15750": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/health",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapihealthGETF355F2CE": {
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapihealthA1116529",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapihealthOPTIONS69537CF8": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapihealthA1116529",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiincidentsCE40791B": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "incidents",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiincidentsGET5B972662": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapiincidentsCE40791B",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiincidentsGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapiincidentsFCEE436B": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/incidents",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiincidentsGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapiincidents6068F067": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/incidents",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiincidentsOPTIONS05C829BC": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiincidentsCE40791B",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiinvoicesED00D003": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "invoices",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiinvoicesGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapiinvoicesA878B8B8": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/invoices",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiinvoicesGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapiinvoices1A6CD8B1": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/invoices",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiinvoicesGETB1B09053": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapiinvoicesED00D003",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiinvoicesOPTIONS02EF9251": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiinvoicesED00D003",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapionboard95340DCC": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "onboard",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapionboardOPTIONSF931A347": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapionboard95340DCC",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapionboardPOST34D0592C": {
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "POST",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapionboard95340DCC",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapionboardPOSTApiPermissionMyTestStackCostGuardianAPIAE2E7CE0POSTapionboardF6C57497": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/POST/api/onboard",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapionboardPOSTApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0POSTapionboardBE35AE87": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/POST/api/onboard",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapionboardinitA579DF91": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "onboard-init",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapionboardinitGET3FA3C79E": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapionboardinitA579DF91",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapionboardinitGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapionboardinit730976BB": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/onboard-init",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapionboardinitGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapionboardinitA33952D0": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/onboard-init",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapionboardinitOPTIONS37CF44A7": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapionboardinitA579DF91",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapirecommendations3A5D580C": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "recommendations",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapirecommendationsGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapirecommendations1C66C6CC": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/recommendations",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapirecommendationsGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapirecommendations2940D6B5": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/recommendations",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapirecommendationsGETE966C99B": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapirecommendations3A5D580C",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapirecommendationsOPTIONSF05A6C14": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapirecommendations3A5D580C",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapirecommendationsexecuteEBCB6C8B": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapirecommendations3A5D580C",
        },
        "PathPart": "execute",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapirecommendationsexecuteOPTIONSFF3B4703": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapirecommendationsexecuteEBCB6C8B",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapirecommendationsexecutePOST0CD90BBF": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "POST",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapirecommendationsexecuteEBCB6C8B",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapirecommendationsexecutePOSTApiPermissionMyTestStackCostGuardianAPIAE2E7CE0POSTapirecommendationsexecute60A3CD2B": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/POST/api/recommendations/execute",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapirecommendationsexecutePOSTApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0POSTapirecommendationsexecute2B955B06": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/POST/api/recommendations/execute",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapisettings9F211713": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "settings",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapisettingsOPTIONS07E5CF5E": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapisettings9F211713",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapisettingsautomation35B5C7F3": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapisettings9F211713",
        },
        "PathPart": "automation",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapisettingsautomationGETA8235FA2": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapisettingsautomation35B5C7F3",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapisettingsautomationGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapisettingsautomation98031240": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/settings/automation",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapisettingsautomationGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapisettingsautomation033BEFD6": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/settings/automation",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapisettingsautomationOPTIONS73998BBF": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapisettingsautomation35B5C7F3",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapisettingsautomationPOST3C334858": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "POST",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapisettingsautomation35B5C7F3",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapisettingsautomationPOSTApiPermissionMyTestStackCostGuardianAPIAE2E7CE0POSTapisettingsautomation72E70073": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/POST/api/settings/automation",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapisettingsautomationPOSTApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0POSTapisettingsautomationE81A4B29": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/POST/api/settings/automation",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapislaclaims8BA01858": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "sla-claims",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapislaclaimsGET866BA3BB": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapislaclaims8BA01858",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapislaclaimsGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapislaclaimsE47D89A1": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/sla-claims",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapislaclaimsGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapislaclaims9CD38CDE": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/sla-claims",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapislaclaimsOPTIONS813BF07E": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapislaclaims8BA01858",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapislareports096EC275": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "sla-reports",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapislareportsOPTIONS1A7A34D8": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapislareports096EC275",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapislareportsclaimId495DD90F": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapislareports096EC275",
        },
        "PathPart": "{claimId}",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapislareportsclaimIdGET017FA1FD": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapislareportsclaimId495DD90F",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapislareportsclaimIdGETApiPermissionMyTestStackCostGuardianAPIAE2E7CE0GETapislareportsclaimIdC1738AFA": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/GET/api/sla-reports/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapislareportsclaimIdGETApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0GETapislareportsclaimId440A4B34": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/GET/api/sla-reports/*",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapislareportsclaimIdOPTIONS0DA99BCE": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapislareportsclaimId495DD90F",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapistripeD59C59BC": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "stripe",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapistripeOPTIONSBF604CA1": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapistripeD59C59BC",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapistripewebhook31251436": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapistripeD59C59BC",
        },
        "PathPart": "webhook",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapistripewebhookOPTIONS2AA35D74": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapistripewebhook31251436",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapistripewebhookPOST1744F96C": {
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "POST",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapistripewebhook31251436",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapistripewebhookPOSTApiPermissionMyTestStackCostGuardianAPIAE2E7CE0POSTapistripewebhook6EAF376B": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/POST/api/stripe/webhook",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapistripewebhookPOSTApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0POSTapistripewebhookCBD066CA": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/POST/api/stripe/webhook",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiupgrade1D7FAC45": {
      "Properties": {
        "ParentId": {
          "Ref": "CostGuardianAPIapi2A7FECEB",
        },
        "PathPart": "upgrade",
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "CostGuardianAPIapiupgradeOPTIONS52102A0D": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "CostGuardianAPIapiupgrade1D7FAC45",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiupgradePOST26DBB04B": {
      "Properties": {
        "AuthorizationType": "COGNITO_USER_POOLS",
        "AuthorizerId": {
          "Ref": "CognitoAuth8E818E2A",
        },
        "HttpMethod": "POST",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "ApiHandler5E7490E8",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "CostGuardianAPIapiupgrade1D7FAC45",
        },
        "RestApiId": {
          "Ref": "CostGuardianAPID69A7606",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "CostGuardianAPIapiupgradePOSTApiPermissionMyTestStackCostGuardianAPIAE2E7CE0POSTapiupgrade30B653E5": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/",
              {
                "Ref": "CostGuardianAPIDeploymentStageprod2322FA4F",
              },
              "/POST/api/upgrade",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianAPIapiupgradePOSTApiPermissionTestMyTestStackCostGuardianAPIAE2E7CE0POSTapiupgrade5D7054E0": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "ApiHandler5E7490E8",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "CostGuardianAPID69A7606",
              },
              "/test-invoke-stage/POST/api/upgrade",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "CostGuardianIdentityPool": {
      "Properties": {
        "AllowUnauthenticatedIdentities": false,
        "CognitoIdentityProviders": [
          {
            "ClientId": {
              "Ref": "CostGuardianUserPoolClient13CE29CE",
            },
            "ProviderName": {
              "Fn::GetAtt": [
                "CostGuardianPoolF8005E80",
                "ProviderName",
              ],
            },
          },
        ],
      },
      "Type": "AWS::Cognito::IdentityPool",
    },
    "CostGuardianPoolF8005E80": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "AccountRecoverySetting": {
          "RecoveryMechanisms": [
            {
              "Name": "verified_phone_number",
              "Priority": 1,
            },
            {
              "Name": "verified_email",
              "Priority": 2,
            },
          ],
        },
        "AdminCreateUserConfig": {
          "AllowAdminCreateUserOnly": false,
        },
        "AutoVerifiedAttributes": [
          "email",
        ],
        "EmailVerificationMessage": "The verification code to your new account is {####}",
        "EmailVerificationSubject": "Verify your new account",
        "Policies": {
          "PasswordPolicy": {
            "MinimumLength": 8,
            "RequireLowercase": true,
            "RequireNumbers": true,
            "RequireSymbols": true,
            "RequireUppercase": true,
          },
        },
        "SmsVerificationMessage": "The verification code to your new account is {####}",
        "UsernameAttributes": [
          "email",
        ],
        "VerificationMessageTemplate": {
          "DefaultEmailOption": "CONFIRM_WITH_CODE",
          "EmailMessage": "The verification code to your new account is {####}",
          "EmailSubject": "Verify your new account",
          "SmsMessage": "The verification code to your new account is {####}",
        },
      },
      "Type": "AWS::Cognito::UserPool",
      "UpdateReplacePolicy": "Delete",
    },
    "CostGuardianTable970FEF22": {
      "DeletionPolicy": "Retain",
      "Properties": {
        "AttributeDefinitions": [
          {
            "AttributeName": "id",
            "AttributeType": "S",
          },
          {
            "AttributeName": "sk",
            "AttributeType": "S",
          },
          {
            "AttributeName": "awsAccountId",
            "AttributeType": "S",
          },
          {
            "AttributeName": "status",
            "AttributeType": "S",
          },
          {
            "AttributeName": "externalId",
            "AttributeType": "S",
          },
          {
            "AttributeName": "entityType",
            "AttributeType": "S",
          },
          {
            "AttributeName": "createdAt",
            "AttributeType": "S",
          },
          {
            "AttributeName": "marketplaceCustomerId",
            "AttributeType": "S",
          },
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "AwsAccountIndex",
            "KeySchema": [
              {
                "AttributeName": "awsAccountId",
                "KeyType": "HASH",
              },
            ],
            "Projection": {
              "NonKeyAttributes": [
                "id",
              ],
              "ProjectionType": "INCLUDE",
            },
          },
          {
            "IndexName": "ActiveCustomerIndex",
            "KeySchema": [
              {
                "AttributeName": "sk",
                "KeyType": "HASH",
              },
              {
                "AttributeName": "status",
                "KeyType": "RANGE",
              },
            ],
            "Projection": {
              "NonKeyAttributes": [
                "id",
                "roleArn",
                "automationSettings",
                "subscriptionStatus",
                "supportLevel",
                "exclusionTags",
              ],
              "ProjectionType": "INCLUDE",
            },
          },
          {
            "IndexName": "ExternalIdIndex",
            "KeySchema": [
              {
                "AttributeName": "externalId",
                "KeyType": "HASH",
              },
            ],
            "Projection": {
              "NonKeyAttributes": [
                "id",
                "status",
              ],
              "ProjectionType": "INCLUDE",
            },
          },
          {
            "IndexName": "StatusIndex",
            "KeySchema": [
              {
                "AttributeName": "status",
                "KeyType": "HASH",
              },
              {
                "AttributeName": "id",
                "KeyType": "RANGE",
              },
            ],
            "Projection": {
              "NonKeyAttributes": [
                "sk",
                "roleArn",
                "automation",
              ],
              "ProjectionType": "INCLUDE",
            },
          },
          {
            "IndexName": "CustomerDataIndex",
            "KeySchema": [
              {
                "AttributeName": "id",
                "KeyType": "HASH",
              },
              {
                "AttributeName": "sk",
                "KeyType": "RANGE",
              },
            ],
            "Projection": {
              "ProjectionType": "ALL",
            },
          },
          {
            "IndexName": "AdminViewIndex",
            "KeySchema": [
              {
                "AttributeName": "entityType",
                "KeyType": "HASH",
              },
              {
                "AttributeName": "createdAt",
                "KeyType": "RANGE",
              },
            ],
            "Projection": {
              "NonKeyAttributes": [
                "status",
                "creditAmount",
                "reportUrl",
                "incidentId",
                "awsAccountId",
                "stripeInvoiceId",
                "caseId",
                "submissionError",
                "reportError",
                "commissionAmount",
              ],
              "ProjectionType": "INCLUDE",
            },
          },
          {
            "IndexName": "MarketplaceCustomerIndex",
            "KeySchema": [
              {
                "AttributeName": "marketplaceCustomerId",
                "KeyType": "HASH",
              },
            ],
            "Projection": {
              "NonKeyAttributes": [
                "id",
              ],
              "ProjectionType": "INCLUDE",
            },
          },
          {
            "IndexName": "RecommendationsIndex",
            "KeySchema": [
              {
                "AttributeName": "id",
                "KeyType": "HASH",
              },
              {
                "AttributeName": "sk",
                "KeyType": "RANGE",
              },
            ],
            "Projection": {
              "ProjectionType": "ALL",
            },
          },
        ],
        "KeySchema": [
          {
            "AttributeName": "id",
            "KeyType": "HASH",
          },
          {
            "AttributeName": "sk",
            "KeyType": "RANGE",
          },
        ],
        "PointInTimeRecoverySpecification": {
          "PointInTimeRecoveryEnabled": true,
        },
        "SSESpecification": {
          "KMSMasterKeyId": {
            "Fn::GetAtt": [
              "DynamoKmsKeyD42E803B",
              "Arn",
            ],
          },
          "SSEEnabled": true,
          "SSEType": "KMS",
        },
        "StreamSpecification": {
          "StreamViewType": "NEW_AND_OLD_IMAGES",
        },
        "TableName": "CostGuardianTable",
        "Tags": [
          {
            "Key": "Environment",
            "Value": "Test",
          },
          {
            "Key": "Project",
            "Value": "CostGuardian",
          },
          {
            "Key": "Owner",
            "Value": "FinOpsTeam",
          },
          {
            "Key": "CostCenter",
            "Value": "12345",
          },
        ],
      },
      "Type": "AWS::DynamoDB::Table",
      "UpdateReplacePolicy": "Retain",
    },
    "CostGuardianUserPoolClient13CE29CE": {
      "Properties": {
        "AllowedOAuthFlows": [
          "implicit",
          "code",
        ],
        "AllowedOAuthFlowsUserPoolClient": true,
        "AllowedOAuthScopes": [
          "profile",
          "phone",
          "email",
          "openid",
          "aws.cognito.signin.user.admin",
        ],
        "CallbackURLs": [
          "https://example.com",
        ],
        "GenerateSecret": false,
        "SupportedIdentityProviders": [
          "COGNITO",
        ],
        "UserPoolId": {
          "Ref": "CostGuardianPoolF8005E80",
        },
      },
      "Type": "AWS::Cognito::UserPoolClient",
    },
    "CostGuardianVpcB2B7D188": {
      "Properties": {
        "CidrBlock": "10.0.0.0/16",
        "EnableDnsHostnames": true,
        "EnableDnsSupport": true,
        "InstanceTenancy": "default",
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc",
          },
        ],
      },
      "Type": "AWS::EC2::VPC",
    },
    "CostGuardianVpcDynamoDBEndpoint742CE152": {
      "Properties": {
        "RouteTableIds": [
          {
            "Ref": "CostGuardianVpcPrivateSubnet1RouteTable0BC6C19F",
          },
          {
            "Ref": "CostGuardianVpcPrivateSubnet2RouteTableB72412A7",
          },
          {
            "Ref": "CostGuardianVpcPublicSubnet1RouteTable8A5E96A4",
          },
          {
            "Ref": "CostGuardianVpcPublicSubnet2RouteTable7A770E16",
          },
        ],
        "ServiceName": {
          "Fn::Join": [
            "",
            [
              "com.amazonaws.",
              {
                "Ref": "AWS::Region",
              },
              ".dynamodb",
            ],
          ],
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc",
          },
        ],
        "VpcEndpointType": "Gateway",
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "CostGuardianVpcIGW3210E578": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc",
          },
        ],
      },
      "Type": "AWS::EC2::InternetGateway",
    },
    "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7": {
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": {
          "Ref": "CostGuardianVpcPublicSubnet1NATGateway6EBA96D6",
        },
        "RouteTableId": {
          "Ref": "CostGuardianVpcPrivateSubnet1RouteTable0BC6C19F",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "CostGuardianVpcPrivateSubnet1RouteTable0BC6C19F": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PrivateSubnet1",
          },
        ],
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386": {
      "Properties": {
        "RouteTableId": {
          "Ref": "CostGuardianVpcPrivateSubnet1RouteTable0BC6C19F",
        },
        "SubnetId": {
          "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "CostGuardianVpcPrivateSubnet1Subnet97B65F1D": {
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            0,
            {
              "Fn::GetAZs": "",
            },
          ],
        },
        "CidrBlock": "10.0.2.0/24",
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private",
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private",
          },
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PrivateSubnet1",
          },
        ],
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA": {
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": {
          "Ref": "CostGuardianVpcPublicSubnet2NATGateway6123009C",
        },
        "RouteTableId": {
          "Ref": "CostGuardianVpcPrivateSubnet2RouteTableB72412A7",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04": {
      "Properties": {
        "RouteTableId": {
          "Ref": "CostGuardianVpcPrivateSubnet2RouteTableB72412A7",
        },
        "SubnetId": {
          "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "CostGuardianVpcPrivateSubnet2RouteTableB72412A7": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PrivateSubnet2",
          },
        ],
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "CostGuardianVpcPrivateSubnet2SubnetB71E218F": {
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            1,
            {
              "Fn::GetAZs": "",
            },
          ],
        },
        "CidrBlock": "10.0.3.0/24",
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private",
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private",
          },
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PrivateSubnet2",
          },
        ],
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "CostGuardianVpcPublicSubnet1DefaultRoute6062545C": {
      "DependsOn": [
        "CostGuardianVpcVPCGW34FBF78F",
      ],
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "CostGuardianVpcIGW3210E578",
        },
        "RouteTableId": {
          "Ref": "CostGuardianVpcPublicSubnet1RouteTable8A5E96A4",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "CostGuardianVpcPublicSubnet1EIPA9B6AFE2": {
      "Properties": {
        "Domain": "vpc",
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PublicSubnet1",
          },
        ],
      },
      "Type": "AWS::EC2::EIP",
    },
    "CostGuardianVpcPublicSubnet1NATGateway6EBA96D6": {
      "DependsOn": [
        "CostGuardianVpcPublicSubnet1DefaultRoute6062545C",
        "CostGuardianVpcPublicSubnet1RouteTableAssociation04EB322C",
      ],
      "Properties": {
        "AllocationId": {
          "Fn::GetAtt": [
            "CostGuardianVpcPublicSubnet1EIPA9B6AFE2",
            "AllocationId",
          ],
        },
        "SubnetId": {
          "Ref": "CostGuardianVpcPublicSubnet1Subnet637DA783",
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PublicSubnet1",
          },
        ],
      },
      "Type": "AWS::EC2::NatGateway",
    },
    "CostGuardianVpcPublicSubnet1RouteTable8A5E96A4": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PublicSubnet1",
          },
        ],
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "CostGuardianVpcPublicSubnet1RouteTableAssociation04EB322C": {
      "Properties": {
        "RouteTableId": {
          "Ref": "CostGuardianVpcPublicSubnet1RouteTable8A5E96A4",
        },
        "SubnetId": {
          "Ref": "CostGuardianVpcPublicSubnet1Subnet637DA783",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "CostGuardianVpcPublicSubnet1Subnet637DA783": {
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            0,
            {
              "Fn::GetAZs": "",
            },
          ],
        },
        "CidrBlock": "10.0.0.0/24",
        "MapPublicIpOnLaunch": true,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public",
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public",
          },
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PublicSubnet1",
          },
        ],
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "CostGuardianVpcPublicSubnet2DefaultRoute7CB45562": {
      "DependsOn": [
        "CostGuardianVpcVPCGW34FBF78F",
      ],
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "CostGuardianVpcIGW3210E578",
        },
        "RouteTableId": {
          "Ref": "CostGuardianVpcPublicSubnet2RouteTable7A770E16",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "CostGuardianVpcPublicSubnet2EIP67496377": {
      "Properties": {
        "Domain": "vpc",
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PublicSubnet2",
          },
        ],
      },
      "Type": "AWS::EC2::EIP",
    },
    "CostGuardianVpcPublicSubnet2NATGateway6123009C": {
      "DependsOn": [
        "CostGuardianVpcPublicSubnet2DefaultRoute7CB45562",
        "CostGuardianVpcPublicSubnet2RouteTableAssociationA4E555A9",
      ],
      "Properties": {
        "AllocationId": {
          "Fn::GetAtt": [
            "CostGuardianVpcPublicSubnet2EIP67496377",
            "AllocationId",
          ],
        },
        "SubnetId": {
          "Ref": "CostGuardianVpcPublicSubnet2Subnet6BE53447",
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PublicSubnet2",
          },
        ],
      },
      "Type": "AWS::EC2::NatGateway",
    },
    "CostGuardianVpcPublicSubnet2RouteTable7A770E16": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PublicSubnet2",
          },
        ],
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "CostGuardianVpcPublicSubnet2RouteTableAssociationA4E555A9": {
      "Properties": {
        "RouteTableId": {
          "Ref": "CostGuardianVpcPublicSubnet2RouteTable7A770E16",
        },
        "SubnetId": {
          "Ref": "CostGuardianVpcPublicSubnet2Subnet6BE53447",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "CostGuardianVpcPublicSubnet2Subnet6BE53447": {
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            1,
            {
              "Fn::GetAZs": "",
            },
          ],
        },
        "CidrBlock": "10.0.1.0/24",
        "MapPublicIpOnLaunch": true,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public",
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public",
          },
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc/PublicSubnet2",
          },
        ],
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "CostGuardianVpcS3EndpointBFE718A3": {
      "Properties": {
        "RouteTableIds": [
          {
            "Ref": "CostGuardianVpcPrivateSubnet1RouteTable0BC6C19F",
          },
          {
            "Ref": "CostGuardianVpcPrivateSubnet2RouteTableB72412A7",
          },
          {
            "Ref": "CostGuardianVpcPublicSubnet1RouteTable8A5E96A4",
          },
          {
            "Ref": "CostGuardianVpcPublicSubnet2RouteTable7A770E16",
          },
        ],
        "ServiceName": {
          "Fn::Join": [
            "",
            [
              "com.amazonaws.",
              {
                "Ref": "AWS::Region",
              },
              ".s3",
            ],
          ],
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": "MyTestStack/CostGuardianVpc",
          },
        ],
        "VpcEndpointType": "Gateway",
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "CostGuardianVpcVPCGW34FBF78F": {
      "Properties": {
        "InternetGatewayId": {
          "Ref": "CostGuardianVpcIGW3210E578",
        },
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::VPCGatewayAttachment",
    },
    "CostIngestor0963D669": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "CostIngestorRoleDefaultPolicy26EC9573",
        "CostIngestorRole3830D4D6",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
            "SNS_TOPIC_ARN": {
              "Ref": "AnomalyAlertsTopic5676DBF5",
            },
          },
        },
        "Handler": "ingest-costs.handler",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "CostIngestorLogGroup5E3431BE",
          },
        },
        "ReservedConcurrentExecutions": 5,
        "Role": {
          "Fn::GetAtt": [
            "CostIngestorRole3830D4D6",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Timeout": 300,
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "CostIngestorLogGroup5E3431BE": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "CostIngestorRole3830D4D6": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Policies": [
          {
            "PolicyDocument": {
              "Statement": [
                {
                  "Action": "dynamodb:Scan",
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "CostGuardianTable970FEF22",
                        "Arn",
                      ],
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Fn::GetAtt": [
                              "CostGuardianTable970FEF22",
                              "Arn",
                            ],
                          },
                          "/index/*",
                        ],
                      ],
                    },
                  ],
                },
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Resource": "arn:aws:iam::*:role/CostGuardianDelegatedRole",
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "DynamoAndAssumePolicy",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "CostIngestorRoleDefaultPolicy26EC9573": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": "sns:Publish",
              "Effect": "Allow",
              "Resource": {
                "Ref": "AnomalyAlertsTopic5676DBF5",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "CostIngestorRoleDefaultPolicy26EC9573",
        "Roles": [
          {
            "Ref": "CostIngestorRole3830D4D6",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "DailyCostIngestionRule42566126": {
      "Properties": {
        "ScheduleExpression": "cron(0 5 * * ? *)",
        "State": "ENABLED",
        "Targets": [
          {
            "Arn": {
              "Fn::GetAtt": [
                "CostIngestor0963D669",
                "Arn",
              ],
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "DailyCostIngestionRuleAllowEventRuleMyTestStackCostIngestor405C8FDA4E803183": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "CostIngestor0963D669",
            "Arn",
          ],
        },
        "Principal": "events.amazonaws.com",
        "SourceArn": {
          "Fn::GetAtt": [
            "DailyCostIngestionRule42566126",
            "Arn",
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "DeleteEbsRole476B95CD": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Policies": [
          {
            "PolicyDocument": {
              "Statement": [
                {
                  "Action": [
                    "dynamodb:Query",
                    "dynamodb:Scan",
                    "dynamodb:GetItem",
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "CostGuardianTable970FEF22",
                        "Arn",
                      ],
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Fn::GetAtt": [
                              "CostGuardianTable970FEF22",
                              "Arn",
                            ],
                          },
                          "/index/*",
                        ],
                      ],
                    },
                  ],
                },
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Resource": "arn:aws:iam::*:role/CostGuardianDelegatedRole",
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "DynamoPolicy",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "DeleteEbsRoleDefaultPolicyBE30F538": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "DeleteEbsRoleDefaultPolicyBE30F538",
        "Roles": [
          {
            "Ref": "DeleteEbsRole476B95CD",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "DeleteUnusedEbs3A5FAC7B": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "DeleteEbsRoleDefaultPolicyBE30F538",
        "DeleteEbsRole476B95CD",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
          },
        },
        "FunctionName": "DeleteUnusedEbs",
        "Handler": "delete-unused-ebs.handler",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "DeleteUnusedEbsLogGroupD36C5C82",
          },
        },
        "ReservedConcurrentExecutions": 10,
        "Role": {
          "Fn::GetAtt": [
            "DeleteEbsRole476B95CD",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Timeout": 300,
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "DeleteUnusedEbsLogGroupD36C5C82": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "DynamoKmsKeyD42E803B": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Description": "KMS key for DynamoDB table encryption",
        "EnableKeyRotation": true,
        "KeyPolicy": {
          "Statement": [
            {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "EventBusPolicy": {
      "Properties": {
        "EventBusName": "default",
        "Statement": {
          "Fn::Join": [
            "",
            [
              "{"Effect":"Allow","Principal":"*","Action":"events:PutEvents","Resource":"arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":events:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":event-bus/default","Condition":{"StringEquals":{"aws:PrincipalArn":"arn:aws:iam::*:role/EventBusRole"}}}",
            ],
          ],
        },
        "StatementId": "AllowClientHealthEvents",
      },
      "Type": "AWS::Events::EventBusPolicy",
    },
    "ExecuteRecommendation661572F9": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "ExecuteRecommendationServiceRoleDefaultPolicy3123CFC9",
        "ExecuteRecommendationServiceRoleBA12FBD4",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
          },
        },
        "FunctionName": "ExecuteRecommendation",
        "Handler": "execute-recommendation.handler",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "ExecuteRecommendationLogGroupC085BE40",
          },
        },
        "MemorySize": 256,
        "ReservedConcurrentExecutions": 10,
        "Role": {
          "Fn::GetAtt": [
            "ExecuteRecommendationServiceRoleBA12FBD4",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Timeout": 300,
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "ExecuteRecommendationLogGroupC085BE40": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "ExecuteRecommendationServiceRoleBA12FBD4": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "ExecuteRecommendationServiceRoleDefaultPolicy3123CFC9": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "ExecuteRecommendationServiceRoleDefaultPolicy3123CFC9",
        "Roles": [
          {
            "Ref": "ExecuteRecommendationServiceRoleBA12FBD4",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "HealthEventHandler419E37F7": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "HealthEventHandlerServiceRoleDefaultPolicy9FC42B89",
        "HealthEventHandlerServiceRole360AB706",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
            "SFN_ARN": {
              "Ref": "SLAWorkflow733FFDD9",
            },
          },
        },
        "FunctionName": "HealthEventHandler",
        "Handler": "correlate-health.handler",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "HealthEventHandlerLogGroupE4D9F2FF",
          },
        },
        "ReservedConcurrentExecutions": 20,
        "Role": {
          "Fn::GetAtt": [
            "HealthEventHandlerServiceRole360AB706",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "HealthEventHandlerLogGroupE4D9F2FF": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "HealthEventHandlerServiceRole360AB706": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "HealthEventHandlerServiceRoleDefaultPolicy9FC42B89": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": "states:StartExecution",
              "Effect": "Allow",
              "Resource": {
                "Ref": "SLAWorkflow733FFDD9",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "HealthEventHandlerServiceRoleDefaultPolicy9FC42B89",
        "Roles": [
          {
            "Ref": "HealthEventHandlerServiceRole360AB706",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "HealthEventRule81982272": {
      "Properties": {
        "EventBusName": "default",
        "EventPattern": {
          "detail-type": [
            "AWS Health Event",
          ],
          "source": [
            "aws.health",
          ],
        },
        "State": "ENABLED",
        "Targets": [
          {
            "Arn": {
              "Fn::GetAtt": [
                "HealthEventHandler419E37F7",
                "Arn",
              ],
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "HealthEventRuleAllowEventRuleMyTestStackHealthEventHandler3F5BACBB6130D9CF": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "HealthEventHandler419E37F7",
            "Arn",
          ],
        },
        "Principal": "events.amazonaws.com",
        "SourceArn": {
          "Fn::GetAtt": [
            "HealthEventRule81982272",
            "Arn",
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "HourlyMeteringRule421AFCCF": {
      "Properties": {
        "ScheduleExpression": "rate(1 hour)",
        "State": "ENABLED",
        "Targets": [
          {
            "Arn": {
              "Fn::GetAtt": [
                "MarketplaceMetering92C6E105",
                "Arn",
              ],
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "HourlyMeteringRuleAllowEventRuleMyTestStackMarketplaceMetering0D0A08065870FC32": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "MarketplaceMetering92C6E105",
            "Arn",
          ],
        },
        "Principal": "events.amazonaws.com",
        "SourceArn": {
          "Fn::GetAtt": [
            "HourlyMeteringRule421AFCCF",
            "Arn",
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "LambdaSecurityGroup0BD9FC99": {
      "Properties": {
        "GroupDescription": "Allow outbound traffic for Lambdas",
        "SecurityGroupEgress": [
          {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "VpcId": {
          "Ref": "CostGuardianVpcB2B7D188",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "LogGroupKmsKey694BE21C": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "EnableKeyRotation": true,
        "KeyPolicy": {
          "Statement": [
            {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "MarketplaceMetering92C6E105": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "MarketplaceMeteringServiceRoleDefaultPolicyD9FC6E35",
        "MarketplaceMeteringServiceRoleA701C5CE",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
            "PRODUCT_CODE": "your-product-code",
          },
        },
        "Handler": "marketplace-metering.handler",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "MarketplaceMeteringLogGroup438D13E5",
          },
        },
        "ReservedConcurrentExecutions": 2,
        "Role": {
          "Fn::GetAtt": [
            "MarketplaceMeteringServiceRoleA701C5CE",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "MarketplaceMeteringLogGroup438D13E5": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "MarketplaceMeteringServiceRoleA701C5CE": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "MarketplaceMeteringServiceRoleDefaultPolicyD9FC6E35": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "MarketplaceMeteringServiceRoleDefaultPolicyD9FC6E35",
        "Roles": [
          {
            "Ref": "MarketplaceMeteringServiceRoleA701C5CE",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "RecommendRdsIdle878468E8": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "RecommendRdsRoleDefaultPolicy3C979140",
        "RecommendRdsRole185A1A88",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
          },
        },
        "Handler": "recommend-rds-idle.handler",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "RecommendRdsIdleLogGroup5AB11231",
          },
        },
        "ReservedConcurrentExecutions": 10,
        "Role": {
          "Fn::GetAtt": [
            "RecommendRdsRole185A1A88",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Timeout": 300,
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "RecommendRdsIdleLogGroup5AB11231": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "RecommendRdsRole185A1A88": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Policies": [
          {
            "PolicyDocument": {
              "Statement": [
                {
                  "Action": [
                    "dynamodb:Query",
                    "dynamodb:Scan",
                    "dynamodb:GetItem",
                    "dynamodb:PutItem",
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "CostGuardianTable970FEF22",
                        "Arn",
                      ],
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Fn::GetAtt": [
                              "CostGuardianTable970FEF22",
                              "Arn",
                            ],
                          },
                          "/index/*",
                        ],
                      ],
                    },
                  ],
                },
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Resource": "arn:aws:iam::*:role/CostGuardianDelegatedRole",
                },
                {
                  "Action": "rds:DescribeDBInstances",
                  "Effect": "Allow",
                  "Resource": "*",
                },
                {
                  "Action": "cloudwatch:GetMetricStatistics",
                  "Effect": "Allow",
                  "Resource": "*",
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "DynamoPolicy",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "RecommendRdsRoleDefaultPolicy3C979140": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "RecommendRdsRoleDefaultPolicy3C979140",
        "Roles": [
          {
            "Ref": "RecommendRdsRole185A1A88",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "ReportsBucket4E7C5994": {
      "DeletionPolicy": "Retain",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "KMSMasterKeyID": {
                "Fn::GetAtt": [
                  "S3Key58EFA89C",
                  "Arn",
                ],
              },
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "LifecycleConfiguration": {
          "Rules": [
            {
              "ExpirationInDays": 365,
              "Id": "DefaultLifecycle",
              "NoncurrentVersionExpiration": {
                "NoncurrentDays": 90,
              },
              "NoncurrentVersionTransitions": [
                {
                  "StorageClass": "GLACIER",
                  "TransitionInDays": 30,
                },
              ],
              "Status": "Enabled",
              "Transitions": [
                {
                  "StorageClass": "STANDARD_IA",
                  "TransitionInDays": 90,
                },
              ],
            },
          ],
        },
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": [
          {
            "Key": "Environment",
            "Value": "Test",
          },
          {
            "Key": "Project",
            "Value": "CostGuardian",
          },
        ],
        "VersioningConfiguration": {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "S3Key58EFA89C": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Description": "KMS key for S3 bucket encryption",
        "EnableKeyRotation": true,
        "KeyPolicy": {
          "Statement": [
            {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            {
              "Action": [
                "kms:Encrypt",
                "kms:Decrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Principal": {
                "Service": "s3.amazonaws.com",
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "SLAWorkflow733FFDD9": {
      "DeletionPolicy": "Delete",
      "DependsOn": [
        "SLAWorkflowRoleDefaultPolicy5C830C26",
        "SLAWorkflowRole524ABF89",
      ],
      "Properties": {
        "DefinitionString": {
          "Fn::Join": [
            "",
            [
              "{"StartAt":"CalculateImpact","States":{"CalculateImpact":{"Next":"CheckSLA","Retry":[{"ErrorEquals":["Lambda.ClientExecutionTimeoutException","Lambda.ServiceException","Lambda.AWSLambdaException","Lambda.SdkClientException"],"IntervalSeconds":2,"MaxAttempts":6,"BackoffRate":2},{"ErrorEquals":["States.TaskFailed","States.Timeout"],"IntervalSeconds":2,"MaxAttempts":3,"BackoffRate":2}],"Catch":[{"ErrorEquals":["States.ALL"],"ResultPath":"$.error","Next":"SlaWorkflowFailed"}],"Type":"Task","OutputPath":"$.Payload","Resource":"arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":states:::lambda:invoke","Parameters":{"FunctionName":"",
              {
                "Fn::GetAtt": [
                  "SlaCalculateImpactC2938DC8",
                  "Arn",
                ],
              },
              "","Payload.$":"$"}},"CheckSLA":{"Next":"GenerateReport","Retry":[{"ErrorEquals":["Lambda.ClientExecutionTimeoutException","Lambda.ServiceException","Lambda.AWSLambdaException","Lambda.SdkClientException"],"IntervalSeconds":2,"MaxAttempts":6,"BackoffRate":2},{"ErrorEquals":["States.TaskFailed"],"IntervalSeconds":2,"MaxAttempts":3,"BackoffRate":2}],"Catch":[{"ErrorEquals":["States.ALL"],"ResultPath":"$.error","Next":"SlaWorkflowFailed"}],"Type":"Task","OutputPath":"$.Payload","Resource":"arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":states:::lambda:invoke","Parameters":{"FunctionName":"",
              {
                "Fn::GetAtt": [
                  "SlaCheck0D07D369",
                  "Arn",
                ],
              },
              "","Payload.$":"$"}},"GenerateReport":{"Next":"IsClaimGenerated?","Retry":[{"ErrorEquals":["Lambda.ClientExecutionTimeoutException","Lambda.ServiceException","Lambda.AWSLambdaException","Lambda.SdkClientException"],"IntervalSeconds":2,"MaxAttempts":6,"BackoffRate":2},{"ErrorEquals":["States.TaskFailed"],"IntervalSeconds":2,"MaxAttempts":3,"BackoffRate":2}],"Catch":[{"ErrorEquals":["States.ALL"],"ResultPath":"$.error","Next":"SlaWorkflowFailed"}],"Type":"Task","OutputPath":"$.Payload","Resource":"arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":states:::lambda:invoke","Parameters":{"FunctionName":"",
              {
                "Fn::GetAtt": [
                  "SlaGenerateReport41ABA1B6",
                  "Arn",
                ],
              },
              "","Payload.$":"$"}},"IsClaimGenerated?":{"Type":"Choice","Choices":[{"Variable":"$.claimGenerated","BooleanEquals":true,"Next":"SubmitTicket"}],"Default":"NoClaimGenerated"},"NoClaimGenerated":{"Type":"Succeed"},"SubmitTicket":{"End":true,"Retry":[{"ErrorEquals":["Lambda.ClientExecutionTimeoutException","Lambda.ServiceException","Lambda.AWSLambdaException","Lambda.SdkClientException"],"IntervalSeconds":2,"MaxAttempts":6,"BackoffRate":2},{"ErrorEquals":["States.TaskFailed"],"IntervalSeconds":2,"MaxAttempts":3,"BackoffRate":2}],"Catch":[{"ErrorEquals":["States.ALL"],"ResultPath":"$.error","Next":"SlaWorkflowFailed"}],"Type":"Task","OutputPath":"$.Payload","Resource":"arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":states:::lambda:invoke","Parameters":{"FunctionName":"",
              {
                "Fn::GetAtt": [
                  "SlaSubmitTicketEB4E0769",
                  "Arn",
                ],
              },
              "","Payload.$":"$"}},"SlaWorkflowFailed":{"Type":"Fail","Error":"SlaWorkflowError","Cause":"SLA workflow execution failed"}}}",
            ],
          ],
        },
        "LoggingConfiguration": {
          "Destinations": [
            {
              "CloudWatchLogsLogGroup": {
                "LogGroupArn": {
                  "Fn::GetAtt": [
                    "SfnLogGroup4E29B71B",
                    "Arn",
                  ],
                },
              },
            },
          ],
          "Level": "ALL",
        },
        "RoleArn": {
          "Fn::GetAtt": [
            "SLAWorkflowRole524ABF89",
            "Arn",
          ],
        },
        "StateMachineName": "SLAWorkflow",
        "StateMachineType": "STANDARD",
        "TracingConfiguration": {
          "Enabled": true,
        },
      },
      "Type": "AWS::StepFunctions::StateMachine",
      "UpdateReplacePolicy": "Delete",
    },
    "SLAWorkflowRole524ABF89": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "states.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "SLAWorkflowRoleDefaultPolicy5C830C26": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "SlaCalculateImpactC2938DC8",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "SlaCalculateImpactC2938DC8",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "SlaCheck0D07D369",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "SlaCheck0D07D369",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "SlaGenerateReport41ABA1B6",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "SlaGenerateReport41ABA1B6",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "SlaSubmitTicketEB4E0769",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "SlaSubmitTicketEB4E0769",
                          "Arn",
                        ],
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": [
                "logs:CreateLogDelivery",
                "logs:GetLogDelivery",
                "logs:UpdateLogDelivery",
                "logs:DeleteLogDelivery",
                "logs:ListLogDeliveries",
                "logs:PutResourcePolicy",
                "logs:DescribeResourcePolicies",
                "logs:DescribeLogGroups",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            {
              "Action": [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
                "xray:GetSamplingRules",
                "xray:GetSamplingTargets",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "SLAWorkflowRoleDefaultPolicy5C830C26",
        "Roles": [
          {
            "Ref": "SLAWorkflowRole524ABF89",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "SfnLogGroup4E29B71B": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 731,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "SlaCalcRole17A883B1": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Policies": [
          {
            "PolicyDocument": {
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Resource": "arn:aws:iam::*:role/CostGuardianDelegatedRole",
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "AssumeAndSupportPolicy",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "SlaCalcRoleDefaultPolicy3A025536": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "SlaCalcRoleDefaultPolicy3A025536",
        "Roles": [
          {
            "Ref": "SlaCalcRole17A883B1",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "SlaCalculateImpactC2938DC8": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "SlaCalcRoleDefaultPolicy3A025536",
        "SlaCalcRole17A883B1",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
          },
        },
        "FunctionName": "SlaCalculateImpact",
        "Handler": "sla-workflow.calculateImpact",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "SlaCalculateImpactLogGroupED6BE0D7",
          },
        },
        "ReservedConcurrentExecutions": 10,
        "Role": {
          "Fn::GetAtt": [
            "SlaCalcRole17A883B1",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "SlaCalculateImpactLogGroupED6BE0D7": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "SlaCheck0D07D369": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "SlaCheckServiceRole14562FCF",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
          },
        },
        "FunctionName": "SlaCheck",
        "Handler": "sla-workflow.checkSLA",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "SlaCheckLogGroup2B41907F",
          },
        },
        "ReservedConcurrentExecutions": 10,
        "Role": {
          "Fn::GetAtt": [
            "SlaCheckServiceRole14562FCF",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "SlaCheckLogGroup2B41907F": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "SlaCheckServiceRole14562FCF": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "SlaGenerateReport41ABA1B6": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "SlaGenerateReportServiceRoleDefaultPolicy6350B957",
        "SlaGenerateReportServiceRole0E4981AB",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
            "REPORTS_BUCKET_NAME": {
              "Ref": "ReportsBucket4E7C5994",
            },
            "STRIPE_SECRET_ARN": {
              "Ref": "StripeSecret80A38A68",
            },
          },
        },
        "FunctionName": "SlaGenerateReport",
        "Handler": "sla-workflow.generateReport",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "SlaGenerateReportLogGroupD81E3C16",
          },
        },
        "ReservedConcurrentExecutions": 10,
        "Role": {
          "Fn::GetAtt": [
            "SlaGenerateReportServiceRole0E4981AB",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "SlaGenerateReportLogGroupD81E3C16": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "SlaGenerateReportServiceRole0E4981AB": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "SlaGenerateReportServiceRoleDefaultPolicy6350B957": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
      ],
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
            {
              "Action": [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": {
                "Ref": "StripeSecret80A38A68",
              },
            },
            {
              "Action": [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret",
              ],
              "Effect": "Allow",
              "Resource": {
                "Ref": "StripeWebhookSecretFCDDBC6A",
              },
            },
            {
              "Action": [
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    {
                      "Fn::GetAtt": [
                        "ReportsBucket4E7C5994",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
            {
              "Action": [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "S3Key58EFA89C",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "SlaGenerateReportServiceRoleDefaultPolicy6350B957",
        "Roles": [
          {
            "Ref": "SlaGenerateReportServiceRole0E4981AB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "SlaSubmitRole89597960": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Policies": [
          {
            "PolicyDocument": {
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Resource": "arn:aws:iam::*:role/CostGuardianDelegatedRole",
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "AssumeAndSupportPolicy",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "SlaSubmitRoleDefaultPolicyA0FD4538": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "SlaSubmitRoleDefaultPolicyA0FD4538",
        "Roles": [
          {
            "Ref": "SlaSubmitRole89597960",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "SlaSubmitTicketEB4E0769": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "SlaSubmitRoleDefaultPolicyA0FD4538",
        "SlaSubmitRole89597960",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
          },
        },
        "FunctionName": "SlaSubmitTicket",
        "Handler": "sla-workflow.submitSupportTicket",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "SlaSubmitTicketLogGroup11CC8728",
          },
        },
        "ReservedConcurrentExecutions": 10,
        "Role": {
          "Fn::GetAtt": [
            "SlaSubmitRole89597960",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "SlaSubmitTicketLogGroup11CC8728": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "StopIdleInstancesF236D216": {
      "DependsOn": [
        "CostGuardianVpcPrivateSubnet1DefaultRouteF69618E7",
        "CostGuardianVpcPrivateSubnet1RouteTableAssociation93CAD386",
        "CostGuardianVpcPrivateSubnet2DefaultRoute2AE993EA",
        "CostGuardianVpcPrivateSubnet2RouteTableAssociation5D775D04",
        "StopIdleRoleDefaultPolicyC8A04B04",
        "StopIdleRole742E5D8A",
      ],
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "824a0f45aea4c612d4cc99cc891140f4c7dd1568dfc937e242554bfd26192498.zip",
        },
        "Environment": {
          "Variables": {
            "DYNAMODB_TABLE": {
              "Ref": "CostGuardianTable970FEF22",
            },
          },
        },
        "Handler": "execute-recommendation.handler",
        "LoggingConfig": {
          "LogGroup": {
            "Ref": "StopIdleInstancesLogGroup39D87FCF",
          },
        },
        "ReservedConcurrentExecutions": 10,
        "Role": {
          "Fn::GetAtt": [
            "StopIdleRole742E5D8A",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Timeout": 300,
        "VpcConfig": {
          "SecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "LambdaSecurityGroup0BD9FC99",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": [
            {
              "Ref": "CostGuardianVpcPrivateSubnet1Subnet97B65F1D",
            },
            {
              "Ref": "CostGuardianVpcPrivateSubnet2SubnetB71E218F",
            },
          ],
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "StopIdleInstancesLogGroup39D87FCF": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "KmsKeyId": {
          "Fn::GetAtt": [
            "LogGroupKmsKey694BE21C",
            "Arn",
          ],
        },
        "RetentionInDays": 30,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "StopIdleRole742E5D8A": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Policies": [
          {
            "PolicyDocument": {
              "Statement": [
                {
                  "Action": [
                    "dynamodb:Query",
                    "dynamodb:Scan",
                    "dynamodb:GetItem",
                    "dynamodb:PutItem",
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "CostGuardianTable970FEF22",
                        "Arn",
                      ],
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Fn::GetAtt": [
                              "CostGuardianTable970FEF22",
                              "Arn",
                            ],
                          },
                          "/index/*",
                        ],
                      ],
                    },
                  ],
                },
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Resource": "arn:aws:iam::*:role/CostGuardianDelegatedRole",
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "DynamoPolicy",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "StopIdleRoleDefaultPolicyC8A04B04": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "DynamoKmsKeyD42E803B",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:PutItem",
                "dynamodb:UpdateItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "CostGuardianTable970FEF22",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "CostGuardianTable970FEF22",
                          "Arn",
                        ],
                      },
                      "/index/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "StopIdleRoleDefaultPolicyC8A04B04",
        "Roles": [
          {
            "Ref": "StopIdleRole742E5D8A",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "StripeSecret80A38A68": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "GenerateSecretString": {
          "GenerateStringKey": "key",
          "SecretStringTemplate": "{"key":""}",
        },
        "KmsKeyId": {
          "Fn::GetAtt": [
            "StripeSecretKmsKey05039D59",
            "Arn",
          ],
        },
      },
      "Type": "AWS::SecretsManager::Secret",
      "UpdateReplacePolicy": "Delete",
    },
    "StripeSecretKmsKey05039D59": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "EnableKeyRotation": true,
        "KeyPolicy": {
          "Statement": [
            {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            {
              "Action": [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Condition": {
                "StringEquals": {
                  "kms:ViaService": {
                    "Fn::Join": [
                      "",
                      [
                        "secretsmanager.",
                        {
                          "Ref": "AWS::Region",
                        },
                        ".amazonaws.com",
                      ],
                    ],
                  },
                },
              },
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            {
              "Action": [
                "kms:CreateGrant",
                "kms:DescribeKey",
              ],
              "Condition": {
                "StringEquals": {
                  "kms:ViaService": {
                    "Fn::Join": [
                      "",
                      [
                        "secretsmanager.",
                        {
                          "Ref": "AWS::Region",
                        },
                        ".amazonaws.com",
                      ],
                    ],
                  },
                },
              },
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            {
              "Action": "kms:Decrypt",
              "Condition": {
                "StringEquals": {
                  "kms:ViaService": {
                    "Fn::Join": [
                      "",
                      [
                        "secretsmanager.",
                        {
                          "Ref": "AWS::Region",
                        },
                        ".amazonaws.com",
                      ],
                    ],
                  },
                },
              },
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::GetAtt": [
                    "ApiHandlerServiceRole592E70E9",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            {
              "Action": "kms:Decrypt",
              "Condition": {
                "StringEquals": {
                  "kms:ViaService": {
                    "Fn::Join": [
                      "",
                      [
                        "secretsmanager.",
                        {
                          "Ref": "AWS::Region",
                        },
                        ".amazonaws.com",
                      ],
                    ],
                  },
                },
              },
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::GetAtt": [
                    "SlaGenerateReportServiceRole0E4981AB",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "StripeWebhookSecretFCDDBC6A": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Description": "Stripe webhook signing secret for platform webhooks",
        "GenerateSecretString": {
          "GenerateStringKey": "webhook",
          "SecretStringTemplate": "{"webhook":""}",
        },
        "KmsKeyId": {
          "Fn::GetAtt": [
            "StripeWebhookSecretKmsKey53B2EE88",
            "Arn",
          ],
        },
      },
      "Type": "AWS::SecretsManager::Secret",
      "UpdateReplacePolicy": "Delete",
    },
    "StripeWebhookSecretKmsKey53B2EE88": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "EnableKeyRotation": true,
        "KeyPolicy": {
          "Statement": [
            {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            {
              "Action": [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Condition": {
                "StringEquals": {
                  "kms:ViaService": {
                    "Fn::Join": [
                      "",
                      [
                        "secretsmanager.",
                        {
                          "Ref": "AWS::Region",
                        },
                        ".amazonaws.com",
                      ],
                    ],
                  },
                },
              },
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            {
              "Action": [
                "kms:CreateGrant",
                "kms:DescribeKey",
              ],
              "Condition": {
                "StringEquals": {
                  "kms:ViaService": {
                    "Fn::Join": [
                      "",
                      [
                        "secretsmanager.",
                        {
                          "Ref": "AWS::Region",
                        },
                        ".amazonaws.com",
                      ],
                    ],
                  },
                },
              },
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            {
              "Action": "kms:Decrypt",
              "Condition": {
                "StringEquals": {
                  "kms:ViaService": {
                    "Fn::Join": [
                      "",
                      [
                        "secretsmanager.",
                        {
                          "Ref": "AWS::Region",
                        },
                        ".amazonaws.com",
                      ],
                    ],
                  },
                },
              },
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::GetAtt": [
                    "ApiHandlerServiceRole592E70E9",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
            {
              "Action": "kms:Decrypt",
              "Condition": {
                "StringEquals": {
                  "kms:ViaService": {
                    "Fn::Join": [
                      "",
                      [
                        "secretsmanager.",
                        {
                          "Ref": "AWS::Region",
                        },
                        ".amazonaws.com",
                      ],
                    ],
                  },
                },
              },
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::GetAtt": [
                    "SlaGenerateReportServiceRole0E4981AB",
                    "Arn",
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "WeeklyAutomationRule5514088E": {
      "Properties": {
        "ScheduleExpression": "cron(0 3 ? * SUN *)",
        "State": "ENABLED",
        "Targets": [
          {
            "Arn": {
              "Ref": "AutomationWorkflow31EDE987",
            },
            "Id": "Target0",
            "RoleArn": {
              "Fn::GetAtt": [
                "AutomationWorkflowEventsRole4334F553",
                "Arn",
              ],
            },
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
  },
  "Rules": {
    "CheckBootstrapVersion": {
      "Assertions": [
        {
          "Assert": {
            "Fn::Not": [
              {
                "Fn::Contains": [
                  [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;
